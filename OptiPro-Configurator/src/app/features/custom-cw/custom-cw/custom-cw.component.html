<!-- loader start -->
<!-- <div class="loader-sm" *ngIf="showLoader">
    <svg viewBox="0 0 218.2 218.8" class="loader2">
        <use xlink:href="#loader2"></use>
    </svg>
</div> -->
<!-- loader end -->

<!-- loader start for lookup -->
<div class="loader-sm" *ngIf="showLookupLoader">
    <svg viewBox="0 0 218.2 218.8" class="loader2">
        <use xlink:href="#loader2"></use>
    </svg>
</div>
<!-- loader end for lookup -->




<div class="layout-mode" fxFlex fxLayout="column">
    <div class="page-header">
        <h4>{{language.Custom_CW}}</h4>
    </div>
    <div class="card" fxFlex>
        <div class="card-body pb-2" fxFlex fxLayout="column">
            <div class="main-portion">
                <div class="w-100 float-left h-100">

                    <div class="form-group row align-items-center">
                        <div class="col-sm-3">
                            <div class="row">
                                <label class="col-sm-4 col-form-label required" for="customer_doc"> Customer Code</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input [disabled]="isCustomer" type="text" ngValue="" class="form-control form-control-sm"
                                            (change)="onCustomerChange('')" name="customer" id="customer" placeholder="{{language.customer}}"
                                            [(ngModel)]="customer_code" #customer>
                                        <div class="input-group-append">
                                            <span class="btn btn-sm btn-primary cursor-pointer btn-icon" id="basic-addon2"
                                                (click)="openCustomerLookUp()">
                                                <svg viewBox="0 -96 512 512" class="icon m-0">
                                                    <use xlink:href="#menu"></use>
                                                </svg>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="row">
                                <label class="col-sm-4 col-form-label" for="customer_doc">{{language.customer_name}}</label>
                                <div class="col-sm-8">
                                    <input type="text" ngValue="" readonly class="form-control form-control-sm" name="customer_name"
                                        disabled="true" id="customer_name" placeholder="{{language.name}}" [(ngModel)]="customer_name"
                                        #customername>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="row align-items-center">
                                <label class="col-sm-4 col-form-label" for="ship_to_address">{{language.ship_to_address}}</label>
                                <div class="col-sm-8">
                                    <textarea type="text" rows="3" readonly ngValue="" class="form-control form-control-sm"
                                        name="ship_to_address" id="ship_to_address" placeholder="{{language.ship_to_address}}"
                                        [(ngModel)]="ship_to_address" #shipto></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="row align-items-center">
                                <label class="col-sm-4col-form-label" for="bill_to_address">{{language.bill_to_address}}</label>
                                <div class="col-sm-8">
                                    <textarea type="text" rows="3" readonly ngValue="" class="form-control form-control-sm"
                                        name="bill_to_address" id="bill_to_address" placeholder="{{language.bill_to_address}}"
                                        [(ngModel)]="bill_to_address" #billto></textarea>
                                </div>
                            </div>
                        </div>


                    </div>




                    <div class="col-md-12 d-flex flex-column" id="left-table-section">
                        <div class="d-flex" [ngStyle]="{'height':'100%', 'flex':'0 1 100%'}">
                            <kendo-grid [data]="gridView" [reorderable]="true" [resizable]="true" (pageChange)="pageChange($event)"
                                [selectable]="true" [skip]="skip" [sortable]="false" [filterable]="isColumnFilter"
                                [filter]="filter" [ngStyle]="{'height':'100%', 'max-width':'100%'}" [pageSize]="selectedValue"
                                [pageable]="true" (filterChange)="filterChange($event)">
                                <ng-template kendoGridToolbarTemplate>
                                    <label class="custom-checkbox mb-0">
                                        <input #chkFilter type="checkbox" id="columnFilter" [(ngModel)]="isColumnFilter"
                                            (change)="saveFilterState()" name="columnfilter">
                                        <span class="checkbox"></span>
                                        <span class="text-inverse">{{language.enable_filter}}</span>
                                    </label>
                                </ng-template>

                                <!-- <kendo-grid-column field="checkbox" [sortable]="false" title="" filter="numeric"
                                    [width]="38" [minResizableWidth]="38" class="text-center" headerClass="text-center"
                                    [filterable]="false">
                                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                                        <label class="custom-checkbox mb-0 wihtout-label">
                                            <input type="checkbox" name="child_checkbox" class="child_checkbox"
                                                #checkedvalue (change)="on_checkbox_checked(checkedvalue.checked,dataItem)"
                                                [checked]="dataItem.checked" id="child_checkbox_{{rowIndex}}">
                                            <span class="checkbox"></span>
                                        </label>
                                    </ng-template>
                                </kendo-grid-column> -->
                                <kendo-grid-column field="LINENO" title="Index" filter="text" [width]="50"
                                [minResizableWidth]="145" [filterable]="true">
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    <input type="text" [disabled]="true" class="form-control  form-control-sm"
                                        #LINENO value={{dataItem.LINENO}} />
                                </ng-template>
                            </kendo-grid-column>
                                <kendo-grid-column field="BodyPart" title="Body Part" filter="text" [width]="100"
                                    [minResizableWidth]="145" [filterable]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="true" class="form-control  form-control-sm"
                                            #BodyPart value={{dataItem.BodyPart}} />
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="Category" title="Category" filter="text" [width]="100"
                                    [minResizableWidth]="145" [filterable]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="true" class="form-control  form-control-sm"
                                            #Category value={{dataItem.Category}} />
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="ItemKey" title="Item Code" filter="text" [width]="100"
                                    [minResizableWidth]="145" [filterable]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="true" class="form-control  form-control-sm"
                                            #ItemKey value={{dataItem.ItemKey}} />
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="component" title="Item Name" filter="text" [width]="145"
                                    [minResizableWidth]="145" [filterable]="true">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="true" class="form-control  form-control-sm"
                                            #component value={{dataItem.component}} />
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="Quantity" title="Quantity" filter="text" [width]="80"
                                    [minResizableWidth]="145" [filterable]="false">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="false" class="form-control  form-control-sm"
                                            #Quantity value={{dataItem.Quantity}} (change)="onChangeQuantity(dataItem.rowindex,Quantity.value)" />
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="Price" title="Price" filter="text" [width]="80"
                                    [minResizableWidth]="145" [filterable]="false">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="false" class="form-control  form-control-sm"
                                            #Price value={{dataItem.Price}} (change)="onChangePrice(dataItem.rowindex,Price.value)" />
                                    </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="TotalPrice" title="Total Price" filter="text" [width]="80"
                                    [minResizableWidth]="145" [filterable]="false">
                                    <ng-template kendoGridCellTemplate let-dataItem>
                                        <input type="text" [disabled]="true" class="form-control  form-control-sm"
                                            #TotalPrice value={{dataItem.TotalPrice}} />
                                    </ng-template>
                                </kendo-grid-column>
                                <ng-template kendoPagerTemplate let-totalPages="totalPages" let-currentPage="currentPage">
                                    <kendo-pager-prev-buttons></kendo-pager-prev-buttons>
                                    <kendo-pager-numeric-buttons [buttonCount]="5"></kendo-pager-numeric-buttons>
                                    <kendo-pager-next-buttons></kendo-pager-next-buttons>
                                    <!-- <kendo-dropdownlist [data]="listItems" class="form-control-sm ml-3 form-control d-inline-flex w-auto"
                                        (selectionChange)="getcurrentPageSize($event)" [(ngModel)]="selectedValue"></kendo-dropdownlist> -->
                                    <kendo-pager-info></kendo-pager-info>
                                </ng-template>
                            </kendo-grid>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sticky-bottom-toolbar d-flex align-items-center justify-content-end border-top pt-2">
                <button type="button" (click)="resetGrid()" class="btn btn-sm btn-sm btn-secondary with-icon">
                    {{language.Reset}}</button>
                &nbsp;&nbsp;
                <button type="button" (click)="OpenPreviewlookUp()" class="mr-10 btn btn-sm btn-primary">
                    {{language.Preview}}
                </button>
                &nbsp;&nbsp;
                <button type="button" (click)="onSaveClick()" class="btn btn-sm btn-success">{{language.Create_Order}}</button>
            </div>
        </div>
    </div>
</div>

<app-custom-dialogs *ngIf="show_dialog" [dialogParams]="dialog_params" (userSelectionValue)="get_dialog_value($event)"></app-custom-dialogs>

<span [hidden]="showLookupLoader">
    <app-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' [selectedImage]="selectedImage" (lookupvalue)="getLookupValue($event)"
        (lookupvalues)="getLookupValues($event)"></app-lookup>
</span>