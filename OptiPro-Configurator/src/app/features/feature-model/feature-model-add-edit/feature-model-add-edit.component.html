<!-- loader start -->
<div class="loader-sm" *ngIf="showLoader">
    <svg viewBox="0 0 218.2 218.8" class="loader2">
        <use xlink:href="#loader2"></use>
    </svg>
</div>
<!-- loader end -->

<!-- loader start for lookup -->
<div class="loader-sm" *ngIf="showLookupLoader">
    <svg viewBox="0 0 218.2 218.8" class="loader2">
        <use xlink:href="#loader2"></use>
    </svg>
</div>
<!-- loader end for lookup -->

<div class="layout-mode" fxFlex fxLayout="column">
    <div class="page-header">
        <h4>{{page_main_title}}</h4>
    </div>
    <div class="card" fxFlex>
        <div class="card-body pb-2" fxFlex fxLayout="column">
            <div class="main-portion">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label required"
                                    for="feature"><span>{{model_code_label}}</span></label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <input type="text" id="codeID" name="codeName" maxlength="50"
                                        [disabled]="code_disabled" class="form-control  form-control-sm mt3"
                                        placeholder="{{model_code_label}}" [(ngModel)]="featureBom.Code"
                                        title="{{featureBom.Code}}" #inputBox
                                        (change)="validate_special_char(featureBom.Code)">
                                </div>
                            </div>
                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label" for="type">{{language.Model_Type}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <select [disabled]="isUsedAccesoriesDisabled"
                                        class="form-control  form-control-sm mt3" (change)="onTypeLookupChange()"
                                        id="typeID" name="typeName" [(ngModel)]="featureBom.type" #select>
                                        <option value="Feature">{{language.feature}}</option>
                                        <option value="Model">{{language.model}}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label required"
                                    for="featurename"><span>{{model_name_label}}</span></label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <input type="text" id="modelID" name="modelID" maxlength="50"
                                        class="form-control  form-control-sm mt3" placeholder="{{model_name_label}}"
                                        [(ngModel)]="featureBom.Name" title="{{featureBom.Name}}"
                                        (change)="call_change_event()">
                                </div>
                            </div>
                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label" for="featureDesc">{{model_desc_label}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <input type="text" name="descName" maxlength="50"
                                        class="form-control  form-control-sm mt3" id="featureDesc"
                                        placeholder="{{model_desc_label}}" [(ngModel)]="featureBom.Desc"
                                        title="{{featureBom.Desc}}" (change)="call_change_event()">
                                </div>
                            </div>

                            <div class="form-group row clearfix" *ngIf="modelType">
                                <label class="col-sm-5 col-form-label" for="type">{{language.MODEL_TYPE}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <select class="form-control  form-control-sm mt3" id="modeltypeID" name="typeName"
                                        [(ngModel)]="OPTM_MODELTYPE" #select>
                                        <option value="">Select</option>
                                        <option value="P">{{language.production_type}}</option>
                                        <option value="S">{{language.Sales_type}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label required"
                                    for="featureItem"><span>{{language.Model_Item}}</span></label>
                                <input type="hidden" name="modelItemCode" class="form-control  form-control-sm"
                                    id="featureItemcode" value="featureBom.ItemCode" [disabled]="isItemCodeDisabled"
                                    placeholder="{{language.Model_Item}}" (change)="onItemCodeChange()"
                                    [(ngModel)]="featureBom.ItemCode" title="{{featureBom.ItemCode}}">
                                <div class="col-sm-5 input-group d-inline-flex align-items-center">
                                    <input type="text" name="modelItemName" class="form-control  form-control-sm"
                                        id="featureItemName" value="featureBom.ItemName" [disabled]="isItemCodeDisabled"
                                        placeholder="{{language.Model_Item}}" (change)="onItemCodeChange()"
                                        [(ngModel)]="featureBom.ItemName" title="{{featureBom.ItemName}}">
                                    <div class="input-group-append" [hidden]="isItemlookupDisabled">
                                        <span class="btn btn-sm btn-primary cursor-pointer btn-icon" id="basic-addon1"
                                            (click)="onTemplateItemPress(true)">
                                            <svg viewBox="0 -96 512 512" class="icon m-0">
                                                <use xlink:href="#menu"></use>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label required"
                                    for="featureItemCode"><span>{{language.Model_Ref}}</span></label>

                                <div class="col-sm-5 input-group d-inline-flex align-items-center">
                                    <input type="text" ngValue="" class="form-control  form-control-sm"
                                        name="itemCodeName" id="featureItemCode" (change)="onRefCodeChange()"
                                        placeholder="{{language.Model_Ref}}" [(ngModel)]="featureBom.Ref"
                                        title="{{featureBom.Ref}}" [disabled]="isRefCodeDisabled"
                                        (change)="call_change_event()">
                                    <div class="input-group-append" [hidden]="isReflookupDisabled">
                                        <span class="btn btn-sm btn-primary cursor-pointer btn-icon" id="basic-addon1"
                                            (click)="onItemGenerationPress(true)">
                                            <svg viewBox="0 -96 512 512" class="icon m-0">
                                                <use xlink:href="#menu"></use>
                                            </svg>
                                        </span>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label" for="datetime_input"
                                    class="col-sm-5 col-form-label">{{language.Model_Date}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <kendo-datepicker #dt12 value="" [min]="minimum_date" id="datetime_input"
                                        name="datepicker" placeholder="{{language.Model_Date}}"
                                        [(ngModel)]="featureBom.Date" [format]="'MM/dd/yyyy'" class="w-100">
                                    </kendo-datepicker>
                                </div>
                            </div>

                            <div class="form-group row clearfix" *ngIf="showImageBlock">
                                <label class="col-sm-5 col-form-label" for="image">{{language.image}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <div class="row image_data">
                                        <div class=" col-md-4 col-sm-4">
                                            <a (click)="enlage_image(ModelImage)">
                                                <img src={{ModelImage}}
                                                    class="img-thumbnail rounded float-left mdelbom_image" alt="">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label" for="image">{{language.Model_Image}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <div class="input-group">
                                        <div class="custom-file">
                                            <input type="file" [ngStyle]="{'position':'absolute', 'width':'0'}"
                                                class="custom-file-input" id="image" #image
                                                (change)="uploadimagefile(image.files)">
                                            <label class="btn btn-secondary btn-sm m-0 d-flex align-items-center"
                                                for="image">{{language.choose_image}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row clearfix">
                                <label class="col-sm-5 col-form-label" for="Status">{{language.Model_Status}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <select class="form-control  form-control-sm mt3" name="featureTypeName"
                                        [(ngModel)]="featureBom.Status" id="featureTypeNameID"
                                        (change)="call_change_event()">
                                        <option value="Active">{{language.Model_Active}}</option>
                                        <option value="Inactive">{{language.Model_InActive}}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row clearfix" [hidden]="IsAccessoryVisible">
                                <label class="col-sm-5 col-form-label"
                                    for="Accessory">{{language.Model_Accessory}}</label>
                                <div class="col-sm-5 d-inline-flex align-items-center">
                                    <div class="custom-control custom-radio custom-control-inline mr-3">
                                        <input [disabled]="isUsedAccesoriesDisabled" type="radio" id="yes"
                                            name="accessory" class="custom-control-input" value="Y"
                                            [(ngModel)]="featureBom.Accessory" (change)="call_change_event()"
                                            title="{{this.language.YES}}">
                                        <label class="custom-control-label" for="yes">{{this.language.YES}}</label>
                                    </div>
                                    <div class="custom-control custom-radio custom-control-inline ">
                                        <input [disabled]="isUsedAccesoriesDisabled" type="radio" id="no"
                                            name="accessory" class="custom-control-input" value="N"
                                            [(ngModel)]="featureBom.Accessory" (change)="call_change_event()"
                                            title="{{this.language.NO}}">
                                        <label class="custom-control-label" for="no">{{this.language.NO}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="sticky-bottom-toolbar d-flex align-items-center justify-content-end border-top pt-2">
                <div class="mr-auto d-flex align-items-center flex-wrap">
                    <button [style.display]="isAttribute ? 'block' : 'none'" type="button" (click)="addAttribute()"
                        class="mr-10 btn btn-sm btn-primary with-icon mr-2">
                        <svg viewBox="0 0 8500 8500" class="icon">
                            <use xlink:href="#add"></use>
                        </svg> {{language.attach_attribute}}
                    </button>
                    <button type="button" (click)="onSaveClick()" *ngIf="isSaveButtonVisible"
                        class="btn btn-sm btn-success with-icon mr-2 "><svg viewBox="0 0 512 512" class="icon">
                            <use xlink:href="#saveDisk"></use>
                        </svg> {{language.save}}</button>

                    <button type="button" *ngIf="isUpdateButtonVisible" (click)="onUpdateClick()"
                        class="btn btn-sm btn-primary with-icon mr-2"><svg viewBox="0 0 512 512" class="icon">
                            <use xlink:href="#saveDisk"></use>
                        </svg> {{language.update}}
                    </button>

                    <button type="button"
                        *ngIf="isAssociatedBOMButtonVisible && featureBom.type == 'Feature' && this.codekey!= ''"
                        class="btn btn-sm btn-info with-icon mr-2" (click)="onAssociatedBOMClick()">
                        <svg class="icon" viewBox="0 0 512 512">
                            <use xlink:href="#hierarchy"></use>
                        </svg> {{language.associated_BOM}}
                    </button>
                </div>
                <button type="button" class="btn btn-sm btn-danger with-icon mr-2" *ngIf="isDeleteButtonVisible"
                    (click)="onDeleteClick()"><svg viewBox="0 0 753.23 753.23" class="icon">
                        <use xlink:href="#bin"></use>
                    </svg> {{language.delete}}
                </button>
                <button type="button" routerLink="{{view_route_link}}"
                    class="btn btn-sm btn-sm btn-secondary with-icon"><svg viewBox="0 0 489 489" class="icon">
                        <use xlink:href="#cancel"></use>
                    </svg> {{language.cancel}}</button>
            </div>
        </div>
    </div>
</div>
<!--Custom Dialog-->
<app-custom-dialogs *ngIf="show_dialog" [dialogParams]="dialog_params" (userSelectionValue)="get_dialog_value($event)">
</app-custom-dialogs>


<span [hidden]="showLookupLoader">
    <app-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' [inputTitle]='inputTitle'
        [selectedImage]="selectedImage" (lookupvalue)="getLookupValue($event)" (lookupvalues)="getLookupValues($event)">
    </app-lookup>
</span>