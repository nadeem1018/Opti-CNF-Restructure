<!-- loader start -->
<div class="loader-sm" *ngIf="showLoader">
  <svg viewBox="0 0 218.2 218.8" class="loader2">
      <use xlink:href="#loader2"></use>
  </svg>
</div>
  <!-- loader end -->
  
<!-- loader start for lookup -->
<div class="loader-sm" *ngIf="showLookupLoader">
  <svg viewBox="0 0 218.2 218.8" class="loader2">
      <use xlink:href="#loader2"></use>
  </svg>
</div>
<!-- loader end for lookup -->

<div class="layout-mode" fxFlex fxLayout="column">
  <div class="page-header">
      <h4>{{page_main_title}}</h4>
  </div>
  <div class="card" fxFlex>
    <div class="card-body pb-2" fxFlex fxLayout="column">  
      <form class="form-horizontal" fxFlex="0 1 100%" fxLayout="column">
        <div class="main-portion">                      
            <div class="row">
              <div class="col-md-6">
      
                <div class="form-group row clearfix mb-2">
                  <label class="col-sm-3 col-form-label" for="rule_code">{{language.rule_code}}</label>
                  <div class="col-sm-5">
                    <input type="text" name="rule_code" class="form-control form-control-sm" maxlength="50" id="rule_code" placeholder="{{language.name}}" [(ngModel)]="rule_wb_data.rule_code" #rulecode title="{{rule_wb_data.rule_code}}" tabindex="1" [disabled]="code_disabled" (change)="detect_change()">
                  </div>
                </div>
      
                <div class="form-group row clearfix mb-2">      
                  <label class="col-sm-3 col-form-label" for="effective_from">{{language.effective_from}}</label>
                  <div class="col-sm-5 d-flex">
                    <kendo-datepicker #dt13 value="" class="w-100" [min]="min" id="effective_from" name="effective_from" placeholder="{{rule_wb_data.effective_from}}" [(ngModel)]="rule_wb_data.effective_from"  [format]="'MM/dd/yyyy'" ></kendo-datepicker>
                  </div>
                </div>
      
                <div class="form-group row clearfix mb-2">
                  <label class="col-sm-3 col-form-label" for="featureDisplay">{{language.discontinued}}</label>
                  <div class="col-sm-5 mt-3px">
                    <label class="custom-checkbox mb-0 wihtout-label">
                      <input type="checkbox" id="yes" name="discontinued" [(ngModel)]="rule_wb_data.discontinued"
                        class="custom-control-input" value="1" title="{{rule_wb_data.discontinued}}" tabindex="5">
                        <span class="checkbox"></span>
                      </label>
                  </div>
                </div>
      
                <div class="form-group row clearfix mb-2">
                  <label class="col-sm-3 col-form-label" for="feature_id">{{language.applicable_for}}</label>
                  <input type="hidden" ngValue="" class="form-control  form-control-sm mt3" name="itemCodeName" id="feature_id" (change)="onFeatureIdChange(rule_wb_data.applicable_for_feature_id)"  placeholder="{{language.applicable_for}}" [(ngModel)]="rule_wb_data.applicable_for_feature_id" title="{{rule_wb_data.applicable_for_feature_id}}">
                  <div class="col-sm-5 input-group">
                      <input type="text" class="form-control  form-control-sm mt3" name="itemCodelookup" id="featuer_code" [(ngModel)]="rule_wb_data.applicable_for_feature_code" title="{{rule_wb_data.applicable_for_feature_code}}" placeholder="{{language.applicable_for}}" (change)="onFeatureIdChange(rule_wb_data.applicable_for_feature_code)" tabindex="6" [readonly]="is_applicable_for_disabled">
                      <div class="input-group-append" [hidden]="is_applicable_for_disabled">
                        <span class="btn btn-sm btn-primary cursor-pointer btn-icon" (click)="getFetureListLookup(true)">
                            <svg class="icon m-0" viewBox="0 -96 512 512"><use xlink:href="#menu"></use></svg>
                        </span>
                      </div>
                  </div> 
                </div>
              </div>
                         
              <div class="col-md-6">
                <div class="form-group row clearfix mb-2">
                  <label class="col-sm-3 col-form-label" for="rule_description">{{language.description}}</label>
                  <div class="col-sm-5">
                    <input type="text" name="description" class="form-control  form-control-sm mt3" maxlength="50"
                      id="rule_description" placeholder="{{language.description}}" [(ngModel)]="rule_wb_data.description"
                      title="{{rule_wb_data.description}}" tabindex="2" (change)="detect_change()">
                  </div>
      
                </div>
      
                <div class="form-group row clearfix mb-2">
                  <label class="col-sm-3 col-form-label" for="EffectiveDate">{{language.EffectiveDate}}</label>
                  <div class="col-sm-5">
                    <kendo-datepicker #dt13 value="" class="w-100" [min]="min" id="effective_to" name="effective_to" placeholder="{{rule_wb_data.effective_to}}" [(ngModel)]="rule_wb_data.effective_to"  [format]="'MM/dd/yyyy'" ></kendo-datepicker>
                    </div>
                </div>
              </div>
            </div>

            <div class="clearfix w-100"></div>

            <div class="d-flex align-items-center mb-2 pl-1" *ngIf="showOutputBtn">
              <button type="button" class="btn btn-success btn-sm with-icon mt-1" title="{{language.add_row}}" style="display:none;" (click)="hide_show_output()" #showOutputButton id="showOutputButton">
                <svg viewBox="0 0 357.18 357.18" class="icon"><use xlink:href="#expand"></use></svg> {{showoutput_btn_text}}
              </button>
            </div>
            <div class="d-flex align-items-center mb-2 pl-1" *ngIf="show_add_sequence_btn">
              <button type="button" title="{{language.add_sequence}}" (click)="addNewSequence()" class="btn btn-sm btn-primary with-icon mr-2">
                <svg viewBox="0 0 8500 8500" class="icon"><use xlink:href="#add"></use></svg>{{language.add_seq}}
              </button>
            </div>
            <div class="d-flex align-items-center mb-2 pl-1" *ngIf="show_sequence">
              <button type="button" title="{{language.add_row}} " (click)="onAddRow()" class="btn btn-sm btn-primary with-icon mr-2">
                <svg viewBox="0 0 8500 8500" class="icon"><use xlink:href="#add"></use></svg> {{language.add_row}}
              </button>
            </div>

            <div class="row">
              <div class="col-sm-12">
                  <!-- top table start -->
                <div class="sequence_box" *ngIf="show_sequence">      
                  <div class="col-sm-12 pl-0 pr-0">
                    <kendo-grid [kendoGridBinding]="rule_sequence_data" [resizable]="true" [sortable]="false" [groupable]="false" [filterable]="false">
                      <ng-template kendoGridToolbarTemplate>
                        <span class="text-center">{{language.input}}</span>
                      </ng-template>
                      <kendo-grid-column field="seqrowno" title="{{language.seq_row_no}}" filter="text" [width]="50" [minResizableWidth]="60">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <input [disabled]="true" type="text" class="form-control  form-control-sm field-nobg-noborder" id="rowNOID" name="rowNONamr" value={{dataItem.rowindex}} title="{{dataItem.rowindex}}" />
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="seqrowno" title="{{language.exp_id}}" filter="text" [width]="80" [minResizableWidth]="80">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <input [disabled]="true" type="text" class="form-control  form-control-sm field-nobg-noborder" id="rowNOID" name="rowNONamr" value={{dataItem.seq_count}} title="{{dataItem.seq_count}}" />
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="operator" title="{{language.operator}}" filter="text" [width]="115" [minResizableWidth]="115">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <select class="form-control  form-control-sm " #selectedOperator (change)="on_input_change(dataItem.rowindex, 'operator', selectedOperator.value )">
                            <option *ngFor="let v of commonData.operator_type()" [value]="v.value" [selected]="dataItem.operator==v.value"> {{v.Name}}</option>
                          </select>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="type" title="{{language.type}}" filter="text" [width]="115" [minResizableWidth]="115">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <select class="form-control  form-control-sm " #selected_type (change)="on_input_change(dataItem.rowindex, 'type', selected_type.value )">
                            <option *ngFor="let v of commonData.rule_seq_type()" [value]="v.value" [selected]="dataItem.type==v.value"> {{v.Name}}</option>
                          </select>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="bracket" title="{{language.bracket}}" filter="text" [width]="115" [minResizableWidth]="115">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <select class="form-control  form-control-sm " #selected_bracket (change)="on_input_change(dataItem.rowindex, 'braces', selected_bracket.value )">
                            <option *ngFor="let v of commonData.bracket_list " [value]="v.value" [selected]="dataItem.braces==v.value"> {{v.value}}</option>
                          </select>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="modelfeature" title="{{language.model_feature}}" filter="text">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <div class="input-group">
                            <input [disabled]="dataItem.isTypeDisabled" type="text" class="form-control  form-control-sm" id="type_value_code" (change)="on_typevalue_change(type_value_code.value,dataItem.rowindex,type_value_code)" value="{{dataItem.type_value_code}}" title="{{dataItem.type_value_code}}" #type_value_code>        
                            <input [disabled]="dataItem.isTypeDisabled" type="hidden" class="form-control  form-control-sm" id="type_value" (change)="on_typevalue_change(type_value_code.value,dataItem.rowindex)" value="{{dataItem.type_value}}" title="{{dataItem.type_value}}" #type_value />
                            <div class="input-group-append" [hidden]="dataItem.isTypeDisabled">
                              <span class="btn btn-sm btn-primary cursor-pointer btn-icon" (click)="show_input_lookup(dataItem.type, dataItem.rowindex)">
                                  <svg class="icon m-0" viewBox="0 -96 512 512"><use xlink:href="#menu"></use></svg>
                              </span>
                            </div>
                          </div>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="condition" title="{{language.condition}}" filter="text" [width]="115"
                        [minResizableWidth]="115">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <select [disabled]="dataItem.isTypeDisabled || dataItem.type == '2'" class="form-control  form-control-sm " #selected_condition (change)="on_input_change(dataItem.rowindex, 'condition', selected_condition.value )">
                            <option value=""></option>
                            <option *ngFor="let v of commonData.express_conditions()" [value]="v.value" [selected]="dataItem.condition==v.value"> {{v.value}}</option>
                          </select>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="operand1" title="{{language.operand_1}}" filter="text" [width]="115" [minResizableWidth]="115">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <div class="input-group">
                            <input type="hidden" class="form-control form-control-sm " id="opeand_1" #operand_1 name="operand_1" value="{{dataItem.operand_1}}" title="{{dataItem.operand_1}}"
                              (change)="on_input_change(dataItem.rowindex, 'operand_1', operand_1.value,operand_1_code )" />
                            <input type="text" [disabled]="dataItem.is_operand1_disable" class="form-control form-control-sm" id="opeand_1" #operand_1_code name="operand_1_code" value="{{dataItem.operand_1_code}}" title="{{dataItem.operand_1_code}}" (change)="on_input_change(dataItem.rowindex, 'operand_1_code', operand_1_code.value,operand_1_code )" />
                            <div class="input-group-append" [hidden]="dataItem.is_operand1_disable">
                              <span class="btn btn-sm btn-primary cursor-pointer btn-icon" (click)="show_operand_lookup(dataItem.type, dataItem.type_value, dataItem.rowindex,'operand_1')">
                                  <svg class="icon m-0" viewBox="0 -96 512 512"><use xlink:href="#menu"></use></svg>
                              </span>
                            </div>
                          </div>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="operand2" title="{{language.operand_2}}" filter="text" [width]="115" [minResizableWidth]="115">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <div class="input-group">
                            <input type="hidden" class="form-control form-control-sm " id="opeand_2" #operand_2 name="operand_2" value="{{dataItem.operand_2}}" title="{{dataItem.operand_2}}"
                              [disabled]="dataItem.is_operand2_disable" (change)="on_input_change(dataItem.rowindex, 'operand_2', operand_2.value,operand_2_code )" />
                            <input type="text" class="form-control form-control-sm " id="opeand_2_code" #operand_2_code name="operand_2_code" value="{{dataItem.operand_2_code}}"
                              title="{{dataItem.operand_2_code}}" [disabled]="dataItem.is_operand2_disable" (change)="on_input_change(dataItem.rowindex, 'operand_2_code', operand_2_code.value,operand_2_code )" />
                            <div class="input-group-append" [hidden]="dataItem.is_operand2_disable">
                              <span class="btn btn-sm btn-primary cursor-pointer btn-icon" (click)="show_operand_lookup(dataItem.type, dataItem.type_value, dataItem.rowindex,'operand_2')">
                                  <svg class="icon m-0" viewBox="0 -96 512 512"><use xlink:href="#menu"></use></svg>
                              </span>
                            </div>
                          </div>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="action" title="{{language.action}}" filter="text" [width]="50"
                        [minResizableWidth]="115">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          <svg viewBox="0 0 753.23 753.23" class="icon"><use xlink:href="#bin"></use></svg>
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <button type="button" class="btn btn-danger btn-sm btn-icon" (click)="onDeleteRow(dataItem.rowindex)">
                            <svg viewBox="0 0 753.23 753.23" class="icon"><use xlink:href="#bin"></use></svg>
                          </button>
                        </ng-template>
                      </kendo-grid-column>
                    </kendo-grid>
                    <div class="clearfix"></div>
                    <div class="text-center d-flex align-items-center p-1 justify-content-center" [ngStyle]="{'background-color': '#f8f9fa','border': '1px solid #dde2e7','border-top': '0'}">
                      <span class="mr-2">{{language.expression}}</span>
                      <button [ngStyle]="{'padding':'3px 5px','min-height':'22px','height':'22px'}" type="button" class="btn btn-sm btn-primary btn-icon mr-2" (click)="genearate_expression()" title="{{this.language.generate_expression}}">
                        <svg viewBox="0 0 21.825 21.825" [ngStyle]="{'width':'14px','height':'14px'}" class="icon"><use xlink:href="#downArrow"></use></svg>
                      </button>
                      <span class="text-center">{{generated_expression_value}}</span>
                    </div>
                  </div>      
                </div>
                <!-- top table end -->
    
                <div class="col-md-12 p-0">
                  <div class="output_window_box mt-2" *ngIf="rule_feature_data.length">
                    <div class="col-sm-12 pl-0 pr-0">
                      <div class="form-group row col-md-12 clearfix">
                        <!--   <div class="col-sm-4 bg-primary text-white">{{language.output}}</div> -->
                        <!-- <label class="text-left col-form-label" for="featureDisplay"></label> -->
                        <div class="text-left mr-3">
                          <div class="custom-control custom-checkbox">
                            <input type="checkbox" id="yess" name="Excluded" [(ngModel)]="rule_wb_data.Excluded"
                              title="{{rule_wb_data.Excluded}}" class="custom-control-input" value="1"
                              (change)="excludeAllRowsOnCheck()">
                            <label class="custom-control-label" for="yess"> {{language.Excluded}}</label>
                          </div>
                        </div>
    
                        <!-- <label class="text-left col-form-label pl-2" for="outputTable"></label> -->
                        <div class="text-left">
                          <div class="custom-control custom-checkbox">
                            <input type="checkbox" id="outputTable" name="isOutputTable" [(ngModel)]="isOutputTable"
                              title="{{language.show_hide_output}}" class="custom-control-input" value="1">
                            <label class="custom-control-label" for="outputTable">{{language.show_hide_output}}</label>
                          </div>
                        </div>
    
                      </div>
    
                      <div class="mb-2" *ngIf="isOutputTable">
    
                        <kendo-grid [kendoGridBinding]="rule_feature_data" [resizable]="true" [sortable]="false"
                          [groupable]="false" [filterable]="false">
                          <ng-template kendoGridToolbarTemplate>
                            <span class="text-center">{{language.output}}</span>
                          </ng-template>
                          <kendo-grid-column field="checkboxoutput" title="{{language.checkbox_output}}" filter="text"
                            [width]="50" [minResizableWidth]="50">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <label class="custom-checkbox without-label mb-0 mx-auto d-table">
                                <input type="checkbox" id="check_all" name="check_all" #outputcheckbox
                                  (click)="check_all(outputcheckbox.checked)" class="custom-control-input"
                                  [disabled]=isExcluded [(checked)]=selectall value="1">
                                  <span class="checkbox"></span>
                              </label>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <label class="custom-checkbox without-label mb-0 mx-auto d-table">
                                <input type="checkbox" class="custom-control-input" id="child_check_{{dataItem.rowindex}}"
                                  name="check_child" #checkboxvalue [disabled]=isExcluded
                                  (change)="output_change_event('check_child',checkboxvalue.checked,dataItem.rowindex)"
                                  value={{dataItem.check_child}} [(checked)]=dataItem.check_child>                                
                                <span class="checkbox"></span>
                              </label>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="feature" title="{{language.feature}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <a class="cursor-pointer" (click)="navigateToFeatureOrModelBom(dataItem.feature)" *ngIf="(dataItem.feature!='' && dataItem.feature!='0' && dataItem.feature!=null)">
                                <svg viewBox="0 0 32 32" class="icon icon-dark"><use xlink:href="#circleRightArrow" ></use></svg>
                              </a>
                              <input type="hidden" [disabled]="true" class="form-control  form-control-sm pull-left "
                                [ngClass]="{'width-90per' :dataItem.feature!='0' && dataItem.feature!=''}" id="feature_name"
                                name="feature_name" value={{dataItem.feature}} title={{dataItem.feature}} #feature
                                (change)="output_change_event('feature_name',feature.value,dataItem.rowindex)" />
    
                              <input type="text" [disabled]="true" class="form-control  form-control-sm pull-left "
                                [ngClass]="{'width-90per' :dataItem.feature!='0' && dataItem.feature!=''}" id="featureCode"
                                name="featureCode" value={{dataItem.featureCode}} title={{dataItem.featureCode}}
                                #featureCode
                                (change)="output_change_event('featureCode',featureCode.value,dataItem.rowindex)" />
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="item" title="{{language.item}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <input type="text" [disabled]="true" class="form-control  form-control-sm " id="feature_item"
                                name="feature_item" #featureitem value={{dataItem.item}} title={{dataItem.item}}
                                (change)="output_change_event('feature_item',featureitem.value,dataItem.rowindex)" />
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="value" title="{{language.value}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <input type="text" [disabled]="true" class="form-control  form-control-sm" id="feature_value"
                                name="feature_value" #featurevalue value={{dataItem.value}} title={{dataItem.value}}
                                (change)="output_change_event('feature_value',featurevalue.value,dataItem.rowindex)" />
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="uom" title="{{language.uom}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <input type="text" [disabled]="true" class="form-control  form-control-sm" #uom id="uom"
                                name="uom" value={{dataItem.uom}} title={{dataItem.uom}}
                                (change)="output_change_event('uom',uom.value,dataItem.rowindex)" />
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="quantity" title="{{language.quantity}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <input type="text" [disabled]="true" class="form-control  form-control-sm pull-right"
                                id="quantity" style="text-align:right" name="quantity" value={{dataItem.quantity}}
                                title={{dataItem.quantity}} #quantity
                                (change)="output_change_event('quantity',quantity.value,dataItem.rowindex)" />
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="editquantity" title="{{language.edit_quantity}}" filter="text"
                            [width]="115" [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <select class="form-control  form-control-sm" id="edit_quanity" #is_quanity_editable
                                (change)="output_change_event('edit_quanity',is_quanity_editable.value,dataItem.rowindex)">
                                <option *ngFor="let v of commonData.yes_no_option()" [value]="v.value"
                                  [selected]="dataItem.edit_quantity==v.value"> {{v.Name}}</option>
                              </select>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="price" title="{{language.price}} ({{defaultCurrency}})" filter="text"
                            [width]="115" [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <input type="text" [disabled]="true" style="text-align:right"
                                class="form-control  form-control-sm pull-right" #price_source id="price_soure"
                                name="price_soure" value={{dataItem.price_source}} title={{dataItem.price_source}}
                                (change)="output_change_event('price_soure',price_source.value,dataItem.rowindex)" />
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="editprice" title="{{language.edit_price}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <select class="form-control  form-control-sm " id="edit_price" #is_price_editable
                                (change)="output_change_event('edit_price',is_price_editable.value,dataItem.rowindex)">
                                <option *ngFor="let v of commonData.yes_no_option()" [value]="v.value"
                                  [selected]="dataItem.edit_price==v.value"> {{v.Name}}</option>
                              </select>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="default" title="{{language.default}}" filter="text" [width]="115"
                            [minResizableWidth]="115">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <ng-container
                                *ngIf="this.feature_bom_header_details.OPTM_ISMULTISELECT == 'N' || this.feature_bom_header_details.OPTM_ISMULTISELECT == NULL">
                                <div class="custom-control custom-radio">
                                  <input type="radio" #default class="custom-control-input"
                                    id="is_default_{{dataItem.rowindex}}" name="is_default" value={{dataItem.is_default}}
                                    title={{dataItem.is_default}}
                                    (change)="output_change_event('default',default.checked,dataItem.rowindex)"
                                    [(checked)]=dataItem.is_default
                                    [disabled]="(!dataItem.check_child || this.feature_bom_header_details.OPTM_MIN_SELECTABLE == '0' )">
                                  <label class="custom-control-label" for="is_default_{{dataItem.rowindex}}"></label>
                                </div>
                              </ng-container>
                              <ng-container *ngIf="this.feature_bom_header_details.OPTM_ISMULTISELECT == 'Y'">
                                <label class="custom-checkbox without-label mb-0 mx-auto d-table">
                                  <input type="checkbox" #default class="custom-control-input" id="is_default_{{dataItem.rowindex}}" name="is_default" value={{dataItem.is_default}} title={{dataItem.is_default}} (change)="output_change_event('default',default.checked,dataItem.rowindex)" [(checked)]=dataItem.is_default [disabled]="(!dataItem.check_child)">
                                  <span class="checkbox"></span>
                                </label>
                              </ng-container>
                            </ng-template>
                          </kendo-grid-column>
                        </kendo-grid>
                      </div>
    
                    </div>
                  </div>              
                </div>
                <!-- bottom table start -->
                <div class="expression_box">          
                  <!--  <hr> -->
                  <div class="d-flex align-items-center mb-2 pl-1" *ngIf="show_sequence">
                    <button type="button" *ngIf="showAddSequenceBtn" (click)="add_rule_sequence()" class="btn btn-sm btn-primary with-icon">
                      <svg viewBox="0 0 490 490" class="icon"><use xlink:href="#confirm"></use></svg> {{language.add_expression}}
                    </button>
                    <button type="button" *ngIf="showUpdateSequenceBtn" (click)="update_rule_sequence()" class="btn btn-sm btn-primary with-icon">
                      <svg viewBox="0 0 383.947 383.947" class="icon"><use xlink:href="#editAlt"></use></svg> {{language.update_expression}}
                    </button>
                    <button type="button" (click)="close_rule_sequence()" class="btn btn-sm btn-secondary with-icon">
                      <svg viewBox="0 0 489 489" class="icon"><use xlink:href="#cancel"></use></svg>{{language.close}}
                    </button>
                  </div>
                  <div class="col-sm-12  pl-0 pr-0">
                    <kendo-grid [kendoGridBinding]="rule_expression_data" [resizable]="true" [sortable]="false" [groupable]="false" [filterable]="false">
                      <ng-template kendoGridToolbarTemplate>
                        <span class="text-center">{{language.expression}}</span>
                      </ng-template>
                      <kendo-grid-column field="seqrowno" title="{{language.seq_row_no}}" filter="text" [width]="50"
                        [minResizableWidth]="60">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <input [disabled]="true" type="text" class="form-control form-control-sm field-nobg-noborder" id="rowNOID" name="rowNONamr" value={{dataItem.rowindex}} />
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="seqrowno" title="{{language.exp_id}}" filter="text" [width]="50" [minResizableWidth]="70">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <input [disabled]="true" type="text" class="form-control  form-control-sm  field-nobg-noborder" id="rowNOID" name="rowNONamr" value={{dataItem.seq_count}} />
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="expression" title="{{language.expression}}" filter="text" [width]="200" [minResizableWidth]="200">
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <span> {{dataItem.expression}} </span>
                        </ng-template>
                      </kendo-grid-column>
                      <kendo-grid-column field="action" title="{{language.action}}" filter="text" [width]="100" [minResizableWidth]="120">
                        <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                          {{language.action}}
                        </ng-template>
                        <ng-template kendoGridCellTemplate let-dataItem>
                          <button type="button" class="btn btn-sm mr-10 btn-info btn-icon mr-2" (click)="edit_expression(dataItem, dataItem.rowindex)" title="{{language.edit}}">
                            <svg class="icon" viewBox="0 0 383.947 383.947"><use xlink:href="#editAlt"></use></svg>
                          </button>
                          <button type="button" class="btn btn-sm btn-icon btn-danger" (click)="delete_expression(dataItem.rowindex)" title="{{language.remove}}">
                            <svg viewBox="0 0 753.23 753.23" class="icon"><use xlink:href="#bin"></use></svg>
                          </button>
                        </ng-template>
                      </kendo-grid-column>
                    </kendo-grid>
                  </div>
                </div>
              </div>
          </div>
        </div>
        <div class="sticky-bottom-toolbar d-flex justify-content-end border-top pt-2">
            <div class="mr-auto d-flex align-items-center flex-wrap">
              <button type="button" (click)="onSave()" *ngIf="isSaveButtonVisible" class="btn btn-sm btn-success with-icon mr-2 ">
                <svg viewBox="0 0 512 512" class="icon"><use xlink:href="#saveDisk"></use></svg>  {{language.save}}
              </button>
              <button type="button" *ngIf="isUpdateButtonVisible" (click)="onSave()" class="btn btn-sm btn-primary with-icon">
                <svg viewBox="0 0 512 512" class="icon"><use xlink:href="#saveDisk"></use></svg> {{language.update}}
              </button>
            </div>
            <div class="ml-auto d-flex align-items-center flex-wrap">
              <button type="button" routerLink="{{view_route_link}}" class="btn btn-sm btn-secondary with-icon">
                <svg viewBox="0 0 489 489" class="icon"><use xlink:href="#cancel"></use></svg>
                <span> {{language.cancel}}</span>
              </button>
              <button type="button" class="btn btn-sm btn-danger with-icon" *ngIf="isDeleteButtonVisible" (click)="onDelete()">
                <svg viewBox="0 0 753.23 753.23" class="icon"><use xlink:href="#bin"></use></svg>
                <span> {{language.delete}}</span>
              </button>      
            </div>
        </div>
      </form>
    </div>
  </div>
</div>
  


<span [hidden]="showLookupLoader">
  <app-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' (lookupvalue)="getLookupValue($event) " [selectedImage]="selectedImage"></app-lookup>
</span>

<!--Custom Dialog-->
<app-custom-dialogs *ngIf="show_dialog" [dialogParams]="dialog_params" (userSelectionValue)="get_dialog_value($event)"></app-custom-dialogs>
    