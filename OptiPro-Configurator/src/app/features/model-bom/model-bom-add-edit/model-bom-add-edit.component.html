<!-- loader start -->
<div class="loader-sm" *ngIf="showLoader">
        <svg viewBox="0 0 218.2 218.8" class="loader2">
          <use xlink:href="#loader2"></use>
        </svg>
      </div>
      <!-- loader end -->
      
      <!-- loader start for lookup -->
      <div class="loader-sm" *ngIf="showLookupLoader">
        <svg viewBox="0 0 218.2 218.8" class="loader2">
          <use xlink:href="#loader2"></use>
        </svg>
      </div>
      <!-- loader end for lookup -->
      
      <div class="layout-mode" fxFlex fxLayout="column">
        <div class="page-header">
          <h4>{{page_main_title}}</h4>
        </div>
        <div class="card" fxFlex>
          <div class="card-body pb-2" fxFlex fxLayout="column">
            <form class="form-horizontal" fxFlex="0 1 100%" fxLayout="column">
              <div class="main-portion">
                <div class="row h-100">
                  <div class="col-md-12 d-flex flex-column" id="left-table-section">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row clearfix">
                          <label class="col-sm-3 col-form-label" for="featureItemCode">
                            <div class="d-flex align-items-center required">
                              <span>{{language.model}}</span>
                              <a class="cursor-pointer ml-2 d-flex align-items-center" (click)="navigateToMasterHeader(modelbom_data.modal_id)"
                                *ngIf="modelbom_data.modal_id && modelbom_data.modal_code">
                                <svg viewBox="0 0 32 32" class="icon icon-dark">
                                  <use xlink:href="#circleRightArrow"></use>
                                </svg>
                              </a>
                            </div>
                          </label>
                          <input type="hidden" ngValue="" class="form-control  form-control-sm" [(ngModel)]="modelbom_data.modal_id"
                            title="{{modelbom_data.modal_id}}" name="featureName" [disabled]="isModelIdEnable" id="featureNameId"
                            placeholder="{{language.model}}" #Modelinputbox (change)="onModelIdChange()">
                          <div class="col-sm-5 input-group">
                            <input type="text" ngValue="" class="form-control  form-control-sm" [(ngModel)]="modelbom_data.modal_code"
                              title="{{modelbom_data.modal_code}}" name="featureCode" [disabled]="isModelIdEnable" id="featureCodeId"
                              placeholder="{{language.model}}" #Modelinputboxcode (change)="onModelIdChange()">
                            <div class="input-group-append" [hidden]=ModelLookupBtnhide>
                              <span class="btn btn-sm btn-primary cursor-pointer btn-icon" (click)="openFeatureLookUp()">
                                <svg class="icon m-0" viewBox="0 -96 512 512">
                                  <use xlink:href="#menu"></use>
                                </svg>
                              </span>
                            </div>
                          </div>
                        </div>
                        <div class="form-group row clearfix">
                          <label class="col-sm-3 col-form-label" for="featureDisplay">{{language.Name}}</label>
                          <div class="col-sm-5">
                            <input type="text" name="feature_name" class="form-control  form-control-sm" id="featuredisplayname"
                              placeholder="{{language.Name}}" readonly [(ngModel)]="modelbom_data.feature_name" title="{{modelbom_data.feature_name}}">
                          </div>
                          <div class="col-sm-4 mt-3px">
                            <label class="custom-checkbox mb-0 w-100 curser-pointer">
                              <input type="checkbox" id="ReadyToUse" name="ReadyToUse" value=modelbom_data.is_ready_to_use
                                (change)="on_isready_change(isreadyuse)" #isreadyuse [(checked)]=modelbom_data.is_ready_to_use
                                [(ngModel)]="modelbom_data.is_ready_to_use" title="{{modelbom_data.is_ready_to_use}}">
                              <span class="checkbox"></span>
                              <span>{{language.ReadyToUse}}</span>
                            </label>
                          </div>
                        </div>
                        <div class="form-group row clearfix">
                          <label class="col-sm-3 col-form-label" for="featureDesc">{{language.description}}</label>
                          <div class="col-sm-5">
                            <input type="text" name="feature_desc" class="form-control  form-control-sm" id="featureDesc"
                              placeholder="{{language.description}}" readonly [(ngModel)]="modelbom_data.feature_desc" title="{{modelbom_data.feature_desc}}">
                          </div>
                        </div>
                        <div class="form-group row clearfix" *ngIf="showImageBlock">
                          <label class="col-sm-3 col-form-label" for="image">{{language.image}}</label>
                          <div class="col-sm-5">
                            <div class="row image_data">
                              <div class=" col-md-4 col-sm-4">
                                <a href="javascript:;" data-toggle="modal" data-target="#enlarge_image_modal" (click)="enlage_image(header_image_data)">
                                  <img src="{{header_image_data}}" class="img-thumbnail rounded float-left mdelbom_image" alt="">
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
      
                    <!-- Add Row Grid -->
                    <div class="d-flex" [ngStyle]="{'height':'100%', 'flex':'0 1 100%'}">
                      <kendo-grid [kendoGridBinding]="modelbom_data" [reorderable]="true" [resizable]="true" [sortable]="false"
                        [groupable]="false" [filterable]="false" [selectable]="selectableSettings" [kendoGridSelectBy]="'rowindex'"
                        [ngStyle]="{'height':'100%', 'max-width':'100%'}" [selectedKeys]="row_selection" (selectionChange)="getSelectedRowDetail($event)">
                        <ng-template kendoGridToolbarTemplate>
                          <div class="d-flex align-items-center">
                            <button [ngStyle]="{'padding':'3px 5px','min-height':'22px'}" type="button" title="{{language.add_row}}"
                              (click)="onAddRow()" #button class="btn btn-sm btn-primary with-icon mr-2"><svg viewBox="0 0 8500 8500"
                                class="icon">
                                <use xlink:href="#add"></use>
                              </svg> {{language.add_row}}
                            </button>
                            <button [ngStyle]="{'padding':'3px 5px','min-height':'22px','height':'22px'}" class="btn btn-primary btn-sm mr-2 btn-icon"
                              [hidden]="this.current_selected_row.length == 0" *ngIf="this.modelbom_data.length > 1" title="{{language.move_row_up}} "
                              (click)="resequence_operation('1')">
                              <svg viewBox="0 0 21.825 21.825" [ngStyle]="{'width':'14px','height':'14px', 'transform':'rotateX(180deg)'}"
                                class="icon">
                                <use xlink:href="#downArrow"></use>
                              </svg>
                            </button>
                            <button [ngStyle]="{'padding':'3px 5px','min-height':'22px','height':'22px'}" class="btn btn-primary btn-sm mr-2 btn-icon"
                              [hidden]="this.current_selected_row.length == 0" *ngIf="this.modelbom_data.length > 1" title="{{language.move_row_down}}"
                              (click)="resequence_operation('2')">
                              <svg viewBox="0 0 21.825 21.825" [ngStyle]="{'width':'14px','height':'14px'}" class="icon">
                                <use xlink:href="#downArrow"></use>
                              </svg>
                            </button>
                            <button type="button" (click)="on_rule_click()" class="btn btn-sm btn-primary with-icon mr-2"
                              [ngStyle]="{'padding':'3px 5px','min-height':'22px','height':'22px'}">
                              <svg viewBox="0 0 32 32" class="icon">
                                <use xlink:href="#transfer"></use>
                              </svg> {{language.apply_remove_rule}}
                            </button>
                          </div>
                        </ng-template>
                        <kendo-grid-column field="rowindex" headerClass="text-center" title="#" width="60"
                          [minResizableWidth]="60" filter="numeric">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <div class="d-flex align-items-center justify-content-center">
                              <a class="cursor-pointer mr-1 d-flex align-items-center" (click)="navigateToFeatureOrModelBom(dataItem.type_value, dataItem.type)"
                                *ngIf="(dataItem.type_value) && (dataItem.type == '1' || dataItem.type == '3')">
                                <svg viewBox="0 0 32 32" class="icon icon-dark">
                                  <use xlink:href="#circleRightArrow"></use>
                                </svg>
                              </a><span>{{dataItem.rowindex}}</span>
                            </div>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="bom_type_option" title="{{language.Model_Type}}" [width]="110"
                          [minResizableWidth]="110">
                          <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="dropdown_index">
                            <select class="form-control form-control-sm" #selectedvalue (change)="on_bom_type_change(selectedvalue.value,dataItem.rowindex)">
                              <option *ngFor="let v of model_bom_type" [value]="v.value" [selected]="dataItem.type==v.value">{{v.Name}}</option>
                            </select>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="ModelBom_FeatureValue" title="{{language.ModelBom_FeatureValue}}"
                          headerClass="required" filter="text" [width]="155" [minResizableWidth]="155">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <div class="input-group">
                              <input [disabled]="dataItem.isTypeDisabled" type="hidden" class="form-control  form-control-sm row_type_value_id"
                                id="type_value" (change)="on_typevalue_change(type_value.value,dataItem.rowindex, type_value_code.value, type_value_code)"
                                value={{dataItem.type_value}} #type_value title={{dataItem.type_value}} />
                              <input [disabled]="dataItem.isTypeDisabled" type="text" class="form-control  form-control-sm row_type_value_code"
                                id="type_value_code" (change)="on_typevalue_change(type_value.value,dataItem.rowindex, type_value_code.value, type_value_code)"
                                value={{dataItem.type_value_code}} #type_value_code title={{dataItem.type_value_code}} />
                              <div class="input-group-append" [hidden]=dataItem.hide>
                                <span class="btn btn-sm btn-primary cursor-pointer btn-icon" (click)="on_type_click(dataItem.type, dataItem.rowindex)">
                                  <svg class="icon m-0" viewBox="0 -96 512 512">
                                    <use xlink:href="#menu"></use>
                                  </svg>
                                </span>
                              </div>
                            </div>
                          </ng-template>
                        </kendo-grid-column>
      
                        <kendo-grid-column field="Bom_Displayname" title="{{language.Bom_Displayname}}" filter="text" [width]="140"
                          [minResizableWidth]="140">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <input type="text" class="form-control  form-control-sm" id="display_name" value={{dataItem.display_name}}
                              (change)="on_display_name_change(display_name.value,dataItem.rowindex)" #display_name title={{dataItem.display_name}} />
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="Bom_Description" title="{{language.Bom_Description}}" filter="text" [width]="145"
                          [minResizableWidth]="145">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <input [disabled]="dataItem.isBomDescriptionDisabled" type="text" class="form-control  form-control-sm"
                              id="bom_description" (change)="on_description_change(bom_description.value,dataItem.rowindex)"
                              value={{dataItem.bom_description}} #bom_description title="{{dataItem.bom_description}}" />
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="uom" title="{{language.uom}}" filter="text" [width]="70"
                          [minResizableWidth]="70">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <input type="text" [disabled]="dataItem.isUOMDisabled" class="form-control  form-control-sm" id="uom"
                              value={{dataItem.uom}} (change)="on_uom_change(uom.value,dataItem.rowindex)" #uom title={{dataItem.uom}} />
                          </ng-template>
                        </kendo-grid-column>
                        <li *ngIf="isAttribute">
                          <kendo-grid-column field="attribute" headerClass="text-center" class="text-center" title="{{language.attribute}}"
                            filter="text" [width]="120" [minResizableWidth]="120">
                            <ng-template kendoGridCellTemplate let-dataItem>
                              <button type="button" (click)="openAttributeLookup(dataItem.rowindex)" class="btn btn-sm btn-icon mr-2 btn-primary"
                                title="{{this.language.attribute}}">
                                <svg class="icon att-icon" viewBox="0 0 512 512">
                                  <use xlink:href="#attrIcon"></use>
                                </svg>
                              </button>
                              <button type="button" [ngStyle]=" {'display': 'none'}" *ngIf="isNextButtonVisible"
                                  class="btn btn-sm btn-primary with-icon btn-next step_2_redirect ml-2"
                                  data-next-block="model_bom_config">
                                  <svg viewBox="0 0 24 24" class="icon arrow-icon">
                                      <use xlink:href="#rightArrow"></use>
                                  </svg>{{language.next}}
                              </button>
                          </div>
                      </div>
                  </fieldset>
                  <fieldset class="one_step_block" data-block_id="model_bom_config">
                      <div class="second_step_block">
                          <div class="main-portion">
                              <div class="wizard_heading_section">
                                  <div class="container-fluid">
                                      <div class="row bg-primary py-1 text-white">
                                          <div class="col-md-10 pull-left d-inline-flex align-items-center">
                                              <svg viewBox="0 0 512 512" class="icon fill-white mr-2">
                                                  <use xlink:href="#hierarchy"></use>
                                              </svg> {{language.model_bill_ofm}}
                                          </div>
                                          <div class="col-md-2 text-right"> {{language.step_4_6}} </div>
                                      </div>
                                  </div>
                                  <hr>
                              </div>
                              <!-- Model BOM To Configure Product start -->
                              <div class="form_section opti_configur-wizard-third-step"
                                  id="opti_configur-wizard-third-step">
                                  <kendo-splitter class="with-border" fxFlex="0 1 100%">
                                      <kendo-splitter-pane [collapsible]="true" size="35%" min="250px"
                                          class="slim-scroll mb-slim-scroll">
                                          <div class="pr-2 pt-2 third-step-left-part">
                                              <div class="form-group row clearfix no-gutters">
                                                  <label class="col-sm-2 col-form-label mb-pl-0 required"
                                                      for="model">{{language.model}}</label>
                                                  <input type="hidden" ngValue=""
                                                      class="form-control  form-control-sm"
                                                      [(ngModel)]="step2_data.modal_id" name="modelName"
                                                      id="modelNameId">

                                                  <div class="col-sm-9 input-group mb-mt-0" style="margin-top: 8px;">
                                                      <input type="text" ngValue=""
                                                          class="form-control  form-control-sm" name="model"
                                                          id="model" placeholder="{{language.model}}"
                                                          [(ngModel)]="step2_data.model_code" #modelcode
                                                          (change)="onModelCodeChange(modelcode.value)">
                                                      <div class="input-group-append">
                                                          <span class="btn btn-sm btn-primary cursor-pointer btn-icon"
                                                              id="basic-addon3" (click)="openModalList()">
                                                              <svg viewBox="0 -96 512 512" class="icon m-0">
                                                                  <use xlink:href="#menu"></use>
                                                              </svg>
                                                          </span>
                                                      </div>
                                                      <span class="col-sm-1 col-form-label open-attr">
                                                          <button [style.display]="isAttribute ? 'block' : 'none'"
                                                              type="button"
                                                              (click)="openAttributeList(step2_data, '3')"
                                                              class="btn btn-sm btn-icon mr-2 btn-primary"
                                                              title="{{this.language.attribute}}">
                                                              <svg class="icon att-icon" viewBox="0 0 512 512">
                                                                  <use xlink:href="#attrIcon"></use>
                                                              </svg>
                                                          </button>
                                                      </span>
                                                  </div>
                                              </div>
                                              <div class="form-group row clearfix no-gutters">
                                                  <label class="col-sm-2 col-form-label mb-pl-0"
                                                      for="quantity">{{language.quantity}}</label>
                                                  <div class="col-sm-9">
                                                      <input type="text" ngValue="" pattern="\d+"
                                                          class="form-control form-control-sm pull-right text-right"
                                                          name="quantity" id="quantity"
                                                          placeholder="{{language.quantity}}"
                                                          [(ngModel)]="step2_data.quantity" #quantity
                                                          (change)="on_input_change('quantity',quantity.value)">

                                                  </div>
                                              </div>

                                              <div class="form-group d-flex align-items-center justify-content-between mb-2"
                                                  *ngIf="ModelHeaderData.length > 0">
                                                  <div class="h5 m-0 text-muted">{{language.features}}</div>
                                                  <div class="">
                                                      <button class="btn btn-sm btn-icon btn-info mr-2" type="button"
                                                          (click)="featurePanelToggleAll(true)" title="Expand All">
                                                          <svg viewBox="0 0 1024 1024" class="icon">
                                                              <use xlink:href="#expandAll"></use>
                                                          </svg>
                                                      </button>
                                                      <button class="btn btn-sm btn-icon btn-success" type="button"
                                                          (click)="featurePanelToggleAll(false)" title="Collapse All">
                                                          <svg viewBox="0 0 1024 1024" class="icon">
                                                              <use xlink:href="#collapseAll"></use>
                                                          </svg>
                                                      </button>
                                                  </div>
                                              </div>

                                              <kendo-panelbar *ngIf="ModelHeaderData.length > 0" [selectable]="false">
                                                  <kendo-panelbar-item [title]="header_data.OPTM_DISPLAYNAME"
                                                      *ngFor="let header_data of ModelHeaderData; let i = index;"
                                                      [expanded]="featurePanelToggle">
                                                      <ng-template kendoPanelBarItemTitle>
                                                          <!-- <h1>hello </h1> -->
                                                          <span class="output_final_screen_save_button d-inline-flex"
                                                              style="
                                                      margin-left: auto;">
                                                              <!-- <button (click)="openAttributeList(header_data, header_data.OPTM_TYPE)" type="button" class="btn btn-sm btn-success with-icon mr-2">
                                                               {{language.attribute}}
                                                          </button> -->
                                                              <button [style.display]="isAttribute ? 'block' : 'none'"
                                                                  type="button"
                                                                  (click)="openAttributeList(header_data, header_data.OPTM_TYPE)"
                                                                  class="btn btn-sm btn-icon mr-2 btn-primary"
                                                                  title="{{this.language.attribute}}">
                                                                  <svg class="icon att-icon" viewBox="0 0 512 512">
                                                                      <use xlink:href="#attrIcon"></use>
                                                                  </svg>
                                                              </button>
                                                          </span>
                                                      </ng-template>
                                                      <ng-template kendoPanelBarContent>
                                                          <div *ngIf="header_data.OPTM_ISCUSTOMVIEW == 'Y'"
                                                              class="hack2">
                                                              <table
                                                                  class="parent_table inner-table table table-bordered table-strip table-sm border-0 mb-0">
                                                                  <thead class="thead-dark"
                                                                      *ngIf="ModelHeaderData.length > 0">
                                                                      <tr>
                                                                          <th class="text-center"
                                                                              [ngStyle]=" {'width': '30px'}">#</th>
                                                                          <th>{{language.code}}</th>
                                                                          <th>{{language.description}}</th>
                                                                          <!-- <th>{{language.image}}</th>                                                                     -->
                                                                          <th *ngFor="let columnName of table_head">
                                                                              {{columnName.title}}
                                                                          </th>

                                                                      </tr>
                                                                  </thead>
                                                                  <tbody
                                                                      *ngIf="get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel).length > 0">
                                                                      <tr *ngFor="let feature_model_data of get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel); let i= index;"
                                                                          [ngClass]="( feature_model_data.disable === true && header_data.OPTM_TYPE != 3 ) ? 'tr-hide' : '' ">
                                                                          <td class="text-center"
                                                                              [ngStyle]=" {'width': '30px'}">
                                                                              <label
                                                                                  class="custom-{{header_data.element_type}} mb-0 wihtout-label"
                                                                                  *ngIf="header_data.is_second_level == 1">
                                                                                  <input
                                                                                      type="{{header_data.element_type}}"
                                                                                      id="checkbox_child_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      #selectionchecked
                                                                                      name="checkbox_child_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      (change)="onselectionchange(feature_model_data,selectionchecked.checked,selectionchecked.id,true, header_data.unique_key, false, false, false)"
                                                                                      [(checked)]="feature_model_data.checked"
                                                                                      [disabled]="feature_model_data.disable && header_data.OPTM_TYPE != 3">
                                                                                  <span class="checkbox"></span>
                                                                              </label>
                                                                              <label
                                                                                  class="custom-{{header_data.element_type}} mb-0 wihtout-label"
                                                                                  *ngIf="header_data.is_second_level== undefined">
                                                                                  <input
                                                                                      type="{{header_data.element_type}}"
                                                                                      id="checkbox_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      #selectionchecked
                                                                                      name="checkbox_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      (change)="onselectionchange(feature_model_data,selectionchecked.checked,selectionchecked.id,false, header_data.unique_key, false, false, false)"
                                                                                      [(checked)]="feature_model_data.checked"
                                                                                      [disabled]="feature_model_data.disable && header_data.OPTM_TYPE != 3">
                                                                                  <span class="checkbox"></span>
                                                                              </label>
                                                                          </td>
                                                                          <td>
                                                                              <span
                                                                                  *ngIf="feature_model_data['OPTM_TYPE']=='1'">{{feature_model_data.feature_code}}</span>
                                                                              <span
                                                                                  *ngIf="feature_model_data['OPTM_TYPE']=='2'">{{feature_model_data.OPTM_ITEMKEY}}</span>
                                                                              <span
                                                                                  *ngIf="feature_model_data['OPTM_TYPE']=='3'">{{feature_model_data.OPTM_DISPLAYNAME}}</span>
                                                                          </td>
                                                                          <td>{{feature_model_data.OPTM_DISPLAYNAME}}
                                                                          </td>
                                                                          <!-- <td>
                                                                      <div class="image-preivew" *ngIf="feature_model_data.IMAGEPATH!=''">
                                                                          <a href="javascript:;" data-toggle="modal" data-target="#enlarge_image_modal"
                                                                          (click)="enlage_image(feature_model_data.IMAGEPATH)">
                                                                          <img src="{{feature_model_data.IMAGEPATH}}" [ngStyle]=" {'width': '40px'}" alt="" class="img-thumbnail">
                                                                          </a>
                                                                      </div>
                                                                  </td> -->

                                                                          <td *ngFor="let columnName of table_head">
                                                                              {{feature_model_data[columnName.field]}}
                                                                          </td>

                                                                      </tr>
                                                                  </tbody>
                                                                  <tfoot
                                                                      *ngIf="get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel).length == 0">
                                                                      <tr>
                                                                          <td>
                                                                              <div
                                                                                  class="{{header_data.element_class}}">
                                                                                  <label
                                                                                      class="custom-{{header_data.element_type}} mb-0 wihtout-label"
                                                                                      for="checkbox_{{header_data.OPTM_FEATUREID}}_{{header_data.OPTM_LINENO}}_{{header_data.OPTM_MODELID}}">
                                                                                      <input
                                                                                          type="{{header_data.element_type}}"
                                                                                          id="checkbox_{{header_data.OPTM_FEATUREID}}_{{header_data.OPTM_LINENO}}_{{header_data.OPTM_MODELID}}"
                                                                                          (change)="onselectionchange(header_data,selectionchecked,selectionchecked.id)"
                                                                                          [(checked)]="FeatureBOMDataForSecondLevel.checked"
                                                                                          [disabled]="FeatureBOMDataForSecondLevel.disable"
                                                                                          name="checkbox_{{header_data.OPTM_FEATUREID}}"
                                                                                          #selectionchecked>
                                                                                      <span class="checkbox"></span>
                                                                                  </label>
                                                                              </div>
                                                                          </td>
                                                                          <td>
                                                                              <span
                                                                                  *ngIf="header_data['OPTM_TYPE']=='1'">{{header_data.feature_code}}</span>
                                                                              <span
                                                                                  *ngIf="header_data['OPTM_TYPE']=='2'">{{header_data.OPTM_ITEMKEY}}</span>
                                                                              <span
                                                                                  *ngIf="header_data['OPTM_TYPE']=='3'">{{header_data.child_code}}</span>
                                                                          </td>
                                                                          <td>{{header_data.OPTM_DISPLAYNAME}}</td>
                                                                          <td>
                                                                              <div class="image-preivew"
                                                                                  *ngIf="header_data.IMAGEPATH!=''">
                                                                                  <a href="javascript:;"
                                                                                      data-toggle="modal"
                                                                                      data-target="#enlarge_image_modal"
                                                                                      (click)="enlage_image(header_data.IMAGEPATH)">
                                                                                      <img src="{{header_data.IMAGEPATH}}"
                                                                                          [ngStyle]=" {'width': '40px'}"
                                                                                          alt=""
                                                                                          class="img-thumbnail">
                                                                                  </a>
                                                                              </div>
                                                                          </td>
                                                                      </tr>
                                                                  </tfoot>
                                                              </table>
                                                          </div>
                                                          <div *ngIf="header_data.OPTM_ISCUSTOMVIEW == 'N' || header_data.OPTM_ISCUSTOMVIEW == null "
                                                              class="hack2">
                                                              <table
                                                                  class="parent_table inner-table table table-bordered table-strip table-sm border-0 mb-0">
                                                                  <thead class="thead-dark"
                                                                      *ngIf="ModelHeaderData.length > 0">
                                                                      <tr>
                                                                          <th class="text-center"
                                                                              [ngStyle]=" {'width': '30px'}">#</th>
                                                                          <th>{{language.code}}</th>
                                                                          <th>{{language.description}}</th>
                                                                          <th>{{language.image}}</th>

                                                                      </tr>
                                                                  </thead>
                                                                  <tbody
                                                                      *ngIf="get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel).length > 0">
                                                                      <tr *ngFor="let feature_model_data of get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel); let i= index;"
                                                                          [ngClass]="( feature_model_data.disable === true && header_data.OPTM_TYPE != 3 ) ? 'tr-hide' : '' ">
                                                                          <td class="text-center"
                                                                              [ngStyle]=" {'width': '30px'}">
                                                                              <label
                                                                                  class="custom-{{header_data.element_type}} mb-0 wihtout-label"
                                                                                  *ngIf="header_data.is_second_level == 1">
                                                                                  <input
                                                                                      type="{{header_data.element_type}}"
                                                                                      id="checkbox_child_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      #selectionchecked
                                                                                      name="checkbox_child_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      (change)="onselectionchange(feature_model_data,selectionchecked.checked,selectionchecked.id,true, header_data.unique_key, false, false, false)"
                                                                                      [(checked)]="feature_model_data.checked"
                                                                                      [disabled]="feature_model_data.disable && header_data.OPTM_TYPE != 3">
                                                                                  <span class="checkbox"></span>
                                                                              </label>
                                                                              <label
                                                                                  class="custom-{{header_data.element_type}} mb-0 wihtout-label"
                                                                                  *ngIf="header_data.is_second_level== undefined">
                                                                                  <input
                                                                                      type="{{header_data.element_type}}"
                                                                                      id="checkbox_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      #selectionchecked
                                                                                      name="checkbox_{{feature_model_data.nodeid}}_{{feature_model_data.unique_key}}_{{feature_model_data.OPTM_LINENO}}_{{i}}"
                                                                                      (change)="onselectionchange(feature_model_data,selectionchecked.checked,selectionchecked.id,false, header_data.unique_key, false, false, false)"
                                                                                      [(checked)]="feature_model_data.checked"
                                                                                      [disabled]="feature_model_data.disable && header_data.OPTM_TYPE != 3">
                                                                                  <span class="checkbox"></span>
                                                                              </label>
                                                                          </td>
                                                                          <td>
                                                                              <span
                                                                                  *ngIf="feature_model_data['OPTM_TYPE']=='1'">{{feature_model_data.feature_code}}</span>
                                                                              <span
                                                                                  *ngIf="feature_model_data['OPTM_TYPE']=='2'">{{feature_model_data.OPTM_ITEMKEY}}</span>
                                                                              <span
                                                                                  *ngIf="feature_model_data['OPTM_TYPE']=='3'">{{feature_model_data.OPTM_DISPLAYNAME}}</span>
                                                                          </td>
                                                                          <td>{{feature_model_data.OPTM_DISPLAYNAME}}
                                                                          </td>
                                                                          <td>
                                                                              <div class="image-preivew"
                                                                                  *ngIf="feature_model_data.IMAGEPATH!=''">
                                                                                  <a href="javascript:;"
                                                                                      data-toggle="modal"
                                                                                      data-target="#enlarge_image_modal"
                                                                                      (click)="enlage_image(feature_model_data.IMAGEPATH)">
                                                                                      <img src="{{feature_model_data.IMAGEPATH}}"
                                                                                          [ngStyle]=" {'width': '40px'}"
                                                                                          alt=""
                                                                                          class="img-thumbnail">
                                                                                  </a>
                                                                              </div>
                                                                          </td>



                                                                      </tr>
                                                                  </tbody>
                                                                  <tfoot
                                                                      *ngIf="get_feature_elements(header_data, FeatureBOMDataForSecondLevel, ModelBOMDataForSecondLevel).length == 0">
                                                                      <tr>
                                                                          <td>
                                                                              <div
                                                                                  class="{{header_data.element_class}}">
                                                                                  <label
                                                                                      class="custom-{{header_data.element_type}} mb-0 wihtout-label"
                                                                                      for="checkbox_{{header_data.OPTM_FEATUREID}}_{{header_data.OPTM_LINENO}}_{{header_data.OPTM_MODELID}}">
                                                                                      <input
                                                                                          type="{{header_data.element_type}}"
                                                                                          id="checkbox_{{header_data.OPTM_FEATUREID}}_{{header_data.OPTM_LINENO}}_{{header_data.OPTM_MODELID}}"
                                                                                          (change)="onselectionchange(header_data,selectionchecked,selectionchecked.id)"
                                                                                          [(checked)]="FeatureBOMDataForSecondLevel.checked"
                                                                                          [disabled]="FeatureBOMDataForSecondLevel.disable"
                                                                                          name="checkbox_{{header_data.OPTM_FEATUREID}}"
                                                                                          #selectionchecked>
                                                                                      <span class="checkbox"></span>
                                                                                  </label>
                                                                              </div>
                                                                          </td>
                                                                          <td>
                                                                              <span
                                                                                  *ngIf="header_data['OPTM_TYPE']=='1'">{{header_data.feature_code}}</span>
                                                                              <span
                                                                                  *ngIf="header_data['OPTM_TYPE']=='2'">{{header_data.OPTM_ITEMKEY}}</span>
                                                                              <span
                                                                                  *ngIf="header_data['OPTM_TYPE']=='3'">{{header_data.child_code}}</span>
                                                                          </td>
                                                                          <td>{{header_data.OPTM_DISPLAYNAME}}</td>
                                                                          <td>
                                                                              <div class="image-preivew"
                                                                                  *ngIf="header_data.IMAGEPATH!=''">
                                                                                  <a href="javascript:;"
                                                                                      data-toggle="modal"
                                                                                      data-target="#enlarge_image_modal"
                                                                                      (click)="enlage_image(header_data.IMAGEPATH)">
                                                                                      <img src="{{header_data.IMAGEPATH}}"
                                                                                          [ngStyle]=" {'width': '40px'}"
                                                                                          alt=""
                                                                                          class="img-thumbnail">
                                                                                  </a>
                                                                              </div>
                                                                          </td>
                                                                      </tr>
                                                                  </tfoot>
                                                              </table>
                                                          </div>

                                                      </ng-template>
                                                  </kendo-panelbar-item>
                                              </kendo-panelbar>
                                              <hr>

                                              <!-- new acsessory section - start -->
                                              <div class="form-group d-flex align-items-center justify-content-between mb-2"
                                                  *ngIf="feature_accessory_list.length > 0">
                                                  <div class="h5 m-0 text-muted">{{language.accessories}}</div>
                                                  <div class="">
                                                      <button class="btn btn-sm btn-icon btn-info mr-2" type="button"
                                                          (click)="accessoriesPanelToggleAll(true)"
                                                          title="Expand All">
                                                          <svg viewBox="0 0 1024 1024" class="icon">
                                                              <use xlink:href="#expandAll"></use>
                                                          </svg>
                                                      </button>
                                                      <button class="btn btn-sm btn-icon btn-success" type="button"
                                                          (click)="accessoriesPanelToggleAll(false)"
                                                          title="Collapse All">
                                                          <svg viewBox="0 0 1024 1024" class="icon">
                                                              <use xlink:href="#collapseAll"></use>
                                                          </svg>
                                                      </button>
                                                  </div>
                                              </div>
                                              <kendo-panelbar *ngIf="feature_accessory_list.length > 0"
                                                  [selectable]="false">
                                                  <kendo-panelbar-item [title]="accessory_header_data.name"
                                                      *ngFor="let accessory_header_data of feature_accessory_list; let i = index;"
                                                      [expanded]="accessoriesPanelToggle">
                                                      <ng-template kendoPanelBarContent>
                                                          <table
                                                              class="parent_table inner-table table table-bordered table-strip table-sm border-0 mb-0">
                                                              <thead class="thead-dark"
                                                                  *ngIf="feature_accessory_list.length > 0">
                                                                  <tr>
                                                                      <th class="text-center">#</th>
                                                                      <th>{{language.code}}</th>
                                                                      <th>{{language.description}}</th>
                                                                  </tr>
                                                              </thead>
                                                              <tbody
                                                                  *ngIf="get_accessory_element(accessory_header_data,selectedAccessoryBOM).length > 0">
                                                                  <tr
                                                                      *ngFor="let accessory_item_data of get_accessory_element(accessory_header_data,selectedAccessoryBOM); let i= index;">
                                                                      <td class="text-center"
                                                                          [ngStyle]=" {'width': '30px'}">
                                                                          <label
                                                                              class="custom-checkbox mb-0 wihtout-label">
                                                                              <input type="checkbox"
                                                                                  id="accessory_checkbox_{{accessory_item_data.unique_key}}_{{accessory_item_data.OPTM_LINENO}}_{{i}}"
                                                                                  #accessory_checkbox
                                                                                  name="accessory_checkbox_{{accessory_item_data.unique_key}}_{{accessory_item_data.OPTM_LINENO}}_{{i}}"
                                                                                  (change)="onAccessorySelectionChange(accessory_checkbox.checked,accessory_item_data,accessory_header_data)"
                                                                                  [(checked)]="accessory_item_data.checked">
                                                                              <span class="checkbox"></span>
                                                                          </label>
                                                                      </td>
                                                                      <td>
                                                                          <span
                                                                              *ngIf="accessory_item_data['OPTM_TYPE']=='2'">{{accessory_item_data.OPTM_ITEMKEY}}</span>
                                                                      </td>
                                                                      <td>{{accessory_item_data.OPTM_DISPLAYNAME}}
                                                                      </td>
                                                                  </tr>
                                                              </tbody>
                                                          </table>
                                                      </ng-template>
                                                  </kendo-panelbar-item>
                                              </kendo-panelbar>
                                          </div>
                                      </kendo-splitter-pane>
                                      <kendo-splitter-pane [collapsible]="false" class="slim-scroll"
                                          *ngIf="isdesktopView">
                                          <div class="px-2 third-step-left-right slim-scroll">
                                              <div class="modal_heading_block" *ngIf="isModelVisible">
                                                  <div class="form-group col-md-12 clearfix pl-0 pr-0">
                                                      <span
                                                          class="col-sm-6 bg-light border border-primary">{{language.model}}</span>
                                                      <span
                                                          class="col-sm-6 bg-light border border-primary">{{step2_data.model_code}}</span>
                                                      <hr>
                                                  </div>
                                              </div>
                                              <div class="feature_block">
                                                  <div class="feature_table">
                                                      <kendo-grid [kendoGridBinding]="feature_itm_list_table"
                                                          [resizable]="true" [sortable]="false" [height]="350"
                                                          [groupable]="false" [filterable]="false">
                                                          <kendo-grid-messages
                                                              noRecords="{{this.language.no_items_available}}">
                                                          </kendo-grid-messages>
                                                          <kendo-grid-column field="step_2_right_grid_feature_name"
                                                              title="" template="" [width]="120"
                                                              [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  {{this.language.Output_FeatureName}}
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  <span>
                                                                      <input [disabled]="featurerow.FeatureId"
                                                                          type="hidden"
                                                                          class="form-control form-control-sm"
                                                                          id="type_value"
                                                                          value={{featurerow.FeatureId}}
                                                                          title="{{featurerow.FeatureId}}" />
                                                                      {{featurerow.featureName}}
                                                                  </span>
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                          <kendo-grid-column field="step_2_right_grid_item" title=""
                                                              template="" [width]="120" [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  {{this.language.item_code}}
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  {{featurerow.Item}}
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                          <kendo-grid-column field="step_2_right_grid_description"
                                                              title="" template="" [width]="120"
                                                              [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  {{this.language.Output_ItemDescription}}
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  {{featurerow.Description}}
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                          <kendo-grid-column field="step_2_right_grid_quantity"
                                                              title="" template="" [width]="120"
                                                              [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  <span
                                                                      class="text-right pull-right">{{this.language.quantity}}</span>
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  <input type="text" step="0"
                                                                      class="form-control form-control-sm text-right"
                                                                      id="quantity" value="{{featurerow.quantity}}"
                                                                      title="{{featurerow.quantity}}"
                                                                      (change)="on_feature_input_change('quantity',quantity.value,featurerow.FeatureId,featurerow.Item)"
                                                                      #quantity
                                                                      [disabled]="featurerow.isQuantityDisabled" />
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                          <kendo-grid-column field="step_2_right_grid_price" title=""
                                                              template="" [width]="120" [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  <span
                                                                      class="text-right  pull-right">{{this.language.price}}
                                                                      ({{defaultCurrency}})</span>
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  <input [disabled]="featurerow.isPriceDisabled"
                                                                      type="text" #actual_price
                                                                      title="{{featurerow.Actualprice}}"
                                                                      class="form-control form-control-sm text-right"
                                                                      id="quantity" value={{featurerow.Actualprice}}
                                                                      (change)="on_feature_input_change('actual_price',actual_price.value,featurerow.FeatureId,featurerow.Item)"
                                                                      #pricextn />
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                          <kendo-grid-column field="step_2_right_grid_price_extn"
                                                              title="" template="" [width]="120"
                                                              [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  <span
                                                                      class="text-right  pull-right">{{this.language.extension}}
                                                                      ({{defaultCurrency}})</span>
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  <input type="text" title="{{featurerow.priceext}}"
                                                                      disabled
                                                                      class="form-control form-control-sm text-right"
                                                                      id="quantity" value={{featurerow.pricextn}}
                                                                      (change)="on_feature_input_change('priceext',pricextn.value,featurerow.FeatureId,featurerow.Item)"
                                                                      #pricextn />
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                          <kendo-grid-column field="step_2_right_grid_accessories"
                                                              title="" template="" [width]="120"
                                                              [minResizableWidth]="120">
                                                              <ng-template kendoGridHeaderTemplate let-column
                                                                  let-columnIndex="columnIndex">
                                                                  {{this.language.Model_Accessory}}
                                                              </ng-template>
                                                              <ng-template kendoGridCellTemplate let-featurerow>
                                                                  <!-- {{featurerow.is_accessory}} -->
                                                                  <span *ngIf="featurerow.is_accessory  == 'N'">
                                                                      {{this.language.NO}}
                                                                      <!--  <b class="text-danger"><svg viewBox="0 0 489 489" class="icon"><use xlink:href="#cancel"></use></svg></b> -->
                                                                  </span>
                                                                  <span *ngIf="featurerow.is_accessory  == 'Y'">
                                                                      <!-- <b class="text-success"><i class="fa fa-check fa-fw"></i></b> -->
                                                                      {{this.language.YES}}
                                                                  </span>
                                                              </ng-template>
                                                          </kendo-grid-column>
                                                      </kendo-grid>
                                                  </div>
                                                  <br>
                                                  <div class="feature_discount_table">
                                                      <div class="row no-gutters justify-content-end w-100">
                                                          <table class="table table-bordered table-sm w-auto">
                                                              <tbody>
                                                                  <tr>
                                                                      <td width="70%">
                                                                          {{this.language.product_total}}
                                                                          ({{defaultCurrency}})
                                                                      </td>
                                                                      <td width="30%" class="text-right">{{this.step3_feature_price_bef_dis
                                                                          | toFixed:'3'}}</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td width="70%">
                                                                          {{this.language.accessories_total}}
                                                                          ({{defaultCurrency}})
                                                                      </td>
                                                                      <td class="text-right" width="30%">{{this.step3_acc_price_bef_dis
                                                                          | toFixed:'3'}}</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td width="70%">
                                                                          {{this.language.subtotal}}
                                                                          ({{defaultCurrency}})
                                                                      </td>
                                                                      <td class="text-right" width="30%">c</td>
                                                                  </tr>

                                                                  <tr>
                                                                      <td width="70%">{{language.product_discount}}
                                                                      </td>
                                                                      <td width="30%">
                                                                          <input type="text"
                                                                              class="form-control  form-control-sm text-right"
                                                                              id="product_discount"
                                                                              name="product_discount"
                                                                              #product_discount
                                                                              (change)="on_calculation_change('product_discount',product_discount.value)"
                                                                              [(ngModel)]="this.feature_discount_percent" />
                                                                      </td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td width="70%">
                                                                          {{this.language.accessories_discount}}
                                                                      </td>
                                                                      <td class="text-right" width="30%">
                                                                          <input type="text"
                                                                              class="form-control form-control-sm text-right"
                                                                              id="accessory_item_discount"
                                                                              name="accessory_item_discount"
                                                                              #accessory_item_discount
                                                                              (change)="on_calculation_change('accesory_discount',accessory_item_discount.value)"
                                                                              [(ngModel)]="this.accessory_discount_percent" />
                                                                      </td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td width="70%">
                                                                          <strong>{{this.language.grand_total}}
                                                                              ({{defaultCurrency}})</strong></td>
                                                                      <td class="text-right" width="30%">{{this.acc_grand_total
                                                                          | toFixed:'3'}}</td>
                                                                  </tr>
                                                              </tbody>
                                                          </table>
                                                      </div>
                                                  </div>
                                              </div>
                                          </div>
                                      </kendo-splitter-pane>
                                  </kendo-splitter>

                                  <!-- The Modal -->
                                  <div class="modal grand-model show" style="display: block; padding-left: 17px;"
                                      aria-modal="true" role="dialog" id="myModal1" *ngIf="isModelDetail">
                                      <div class="modal-dialog">
                                          <div class="modal-content">

                                              <!-- Modal Header -->
                                              <div class="modal-header">
                                                  <h4 class="modal-title">{{language.model_item_detals}}</h4>
                                                  <button type="button" (click)="onCloseModelDetails()"
                                                      class="close">&times;</button>
                                              </div>

                                              <!-- Modal body -->
                                              <div class="modal-body grand-modal-body">
                                                  <kendo-splitter-pane [collapsible]="false" class="slim-scroll">
                                                      <div class="px-2 third-step-left-right slim-scroll">
                                                          <div class="modal_heading_block" *ngIf="isModelVisible">
                                                              <div class="form-group col-md-12 clearfix pl-0 pr-0">
                                                                  <span
                                                                      class="col-sm-6 bg-light border border-primary">{{language.model}}</span>
                                                                  <span
                                                                      class="col-sm-6 bg-light border border-primary">{{step2_data.model_code}}</span>
                                                                  <hr>
                                                              </div>
                                                          </div>
                                                          <div class="feature_block">
                                                              <div class="feature_table">
                                                                  <kendo-grid
                                                                      [kendoGridBinding]="feature_itm_list_table"
                                                                      [resizable]="true" [sortable]="false"
                                                                      [height]="350" [groupable]="false"
                                                                      [filterable]="false">
                                                                      <kendo-grid-messages
                                                                          noRecords="{{this.language.no_items_available}}">
                                                                      </kendo-grid-messages>

                                                                      <kendo-grid-column
                                                                          field="step_2_right_grid_item" title=""
                                                                          template="" [width]="80"
                                                                          [minResizableWidth]="80">
                                                                          <ng-template kendoGridHeaderTemplate
                                                                              let-column
                                                                              let-columnIndex="columnIndex">
                                                                              {{this.language.item_code}}
                                                                          </ng-template>
                                                                          <ng-template kendoGridCellTemplate
                                                                              let-featurerow>
                                                                              <div
                                                                                  (click)="onOpenFullModelDetails(featurerow.Item)">
                                                                                  {{featurerow.Item}}
                                                                              </div>
                                                                          </ng-template>
                                                                      </kendo-grid-column>
                                                                      <kendo-grid-column
                                                                          field="step_2_right_grid_description"
                                                                          title="" template="" [width]="120"
                                                                          [minResizableWidth]="120">
                                                                          <ng-template kendoGridHeaderTemplate
                                                                              let-column
                                                                              let-columnIndex="columnIndex">
                                                                              {{this.language.Output_ItemDescription}}
                                                                          </ng-template>
                                                                          <ng-template kendoGridCellTemplate
                                                                              let-featurerow>
                                                                              <div
                                                                                  (click)="onOpenFullModelDetails(featurerow.Item)">
                                                                                  {{featurerow.Description}}
                                                                              </div>
                                                                          </ng-template>
                                                                      </kendo-grid-column>
                                                                      <kendo-grid-column
                                                                          field="step_2_right_grid_quantity" title=""
                                                                          template="" [width]="80"
                                                                          [minResizableWidth]="80">
                                                                          <ng-template kendoGridHeaderTemplate
                                                                              let-column
                                                                              let-columnIndex="columnIndex">
                                                                              <span
                                                                                  class="text-right pull-right">{{this.language.quantity}}</span>
                                                                          </ng-template>
                                                                          <ng-template kendoGridCellTemplate
                                                                              let-featurerow>
                                                                              <input type="text" step="0"
                                                                                  class="form-control form-control-sm text-right"
                                                                                  id="quantity"
                                                                                  value="{{featurerow.quantity}}"
                                                                                  title="{{featurerow.quantity}}"
                                                                                  (change)="on_feature_input_change('quantity',quantity.value,featurerow.FeatureId,featurerow.Item)"
                                                                                  #quantity
                                                                                  [disabled]="featurerow.isQuantityDisabled" />
                                                                          </ng-template>
                                                                      </kendo-grid-column>



                                                                  </kendo-grid>
                                                              </div>
                                                              <br>

                                                          </div>
                                                      </div>
                                                  </kendo-splitter-pane>
                                              </div>

                                          </div>
                                      </div>
                                  </div>
                                  <div class="modal-backdrop show" *ngIf="isModelDetail"></div>


                                  <!-- The Modal -->
                                  <div class="modal grand-model show" style="display: block; padding-left: 17px;"
                                      aria-modal="true" role="dialog" id="myModal1" *ngIf="isCalculation">
                                      <div class="modal-dialog">
                                          <div class="modal-content">

                                              <!-- Modal Header -->
                                              <div class="modal-header">
                                                  <h4 class="modal-title">{{language.price_details}}</h4>
                                                  <button type="button" (click)="onCloseCaluculationModel()"
                                                      class="close">&times;</button>
                                              </div>

                                              <!-- Modal body -->
                                              <div class="modal-body grand-modal-body grand-wizard">
                                                  <div class="grand-inner float-left w-100">
                                                      <ul class="list-unstyled w-100 float-left mb-0">
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.product_total}}
                                                                  ({{defaultCurrency}})
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  {{this.step3_feature_price_bef_dis| toFixed:'3'}}
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.accessories_total}}
                                                                  ({{defaultCurrency}})
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  {{this.step3_acc_price_bef_dis| toFixed:'3'}}
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  Subtotal ($)
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  {{this.acc_grand_total | toFixed:'3'}}
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  Product Discount %
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  <input type="text"
                                                                      class="form-control  form-control-sm text-right"
                                                                      id="product_discount" name="product_discount"
                                                                      #product_discount
                                                                      (change)="on_calculation_change('product_discount',product_discount.value)"
                                                                      [(ngModel)]="this.feature_discount_percent" />
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  Accessories Discount %
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  <input type="text"
                                                                      class="form-control form-control-sm text-right"
                                                                      id="accessory_item_discount"
                                                                      name="accessory_item_discount"
                                                                      #accessory_item_discount
                                                                      (change)="on_calculation_change('accesory_discount',accessory_item_discount.value)"
                                                                      [(ngModel)]="this.accessory_discount_percent" />
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  Grand Total ($)
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  {{this.acc_grand_total  | toFixed:'3'}}
                                                              </div>
                                                          </li>
                                                      </ul>


                                                  </div>
                                              </div>
                                              <div class="modal-footer">
                                                  <button type="button" (click)="onCloseCaluculationModel()"
                                                      class="btn btn-success">Apply</button>
                                                  <button type="button" (click)="onCloseCaluculationModel()"
                                                      class="btn btn-secondary">Cancel</button>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="modal-backdrop show" *ngIf="isCalculation"></div>



                                  <!-- The Modal -->
                                  <div class="modal grand-model show" style="display: block; padding-left: 17px;"
                                      aria-modal="true" role="dialog" id="myModal1" *ngIf="isModelFullDetails">
                                      <div class="modal-dialog">
                                          <div class="modal-content">

                                              <!-- Modal Header -->
                                              <div class="modal-header">
                                                  <h4 class="modal-title">{{language.model_item_detals}}</h4>
                                                  <button type="button" (click)="onCloseFullModelDetails()"
                                                      class="close">&times;</button>
                                              </div>

                                              <!-- Modal body -->
                                              <div class="modal-body grand-modal-body grand-wizard">
                                                  <div class="grand-inner float-left w-100">
                                                      <ul class="list-unstyled w-100 float-left mb-0"
                                                          *ngFor="let featurerow of modelDetailsData">
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.Output_FeatureName}}
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  {{featurerow.featureName}}
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.item_code}}
                                                              </div>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.Output_ItemDescription}}
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  {{featurerow.Description}}
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.quantity}}
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  <input type="text" step="0"
                                                                      class="form-control form-control-sm text-right"
                                                                      id="quantity" value="{{featurerow.quantity}}"
                                                                      title="{{featurerow.quantity}}"
                                                                      (change)="on_feature_input_change('quantity',quantity.value,featurerow.FeatureId,featurerow.Item)"
                                                                      #quantity
                                                                      [disabled]="featurerow.isQuantityDisabled" />
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.price}}
                                                                  ({{defaultCurrency}})
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  <input [disabled]="featurerow.isPriceDisabled"
                                                                      type="text" #actual_price
                                                                      title="{{featurerow.Actualprice}}"
                                                                      class="form-control form-control-sm text-right"
                                                                      id="quantity" value={{featurerow.Actualprice}}
                                                                      (change)="on_feature_input_change('actual_price',actual_price.value,featurerow.FeatureId,featurerow.Item)"
                                                                      #pricextn />
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.extension}}
                                                                  ({{defaultCurrency}})
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  <input type="text" title="{{featurerow.priceext}}"
                                                                      disabled
                                                                      class="form-control form-control-sm text-right"
                                                                      id="quantity" value={{featurerow.pricextn}}
                                                                      (change)="on_feature_input_change('priceext',pricextn.value,featurerow.FeatureId,featurerow.Item)"
                                                                      #pricextn />
                                                              </div>
                                                          </li>
                                                          <li>
                                                              <div class="float-left grand-box-left">
                                                                  {{this.language.Model_Accessory}}
                                                              </div>
                                                              <div class="float-right grand-box-right">
                                                                  <span *ngIf="featurerow.is_accessory  == 'N'">
                                                                      {{this.language.NO}}
                                                                      <!--  <b class="text-danger"><svg viewBox="0 0 489 489" class="icon"><use xlink:href="#cancel"></use></svg></b> -->
                                                                  </span>
                                                                  <span *ngIf="featurerow.is_accessory  == 'Y'">
                                                                      <!-- <b class="text-success"><i class="fa fa-check fa-fw"></i></b> -->
                                                                      {{this.language.YES}}
                                                                  </span>
                                                              </div>
                                                          </li>
                                                      </ul>


                                                  </div>
                                              </div>

                                          </div>
                                      </div>
                                  </div>
                                  <div *ngIf="isModelFullDetails" class="modal-backdrop show"></div>


                              </div>
                              <!-- Model BOM To Configure Product end -->
                              <div class="w-100 float-left tt-box">
                                  <div class="row mb-modelDetail" *ngIf="isMobileView">
                                      <div class="col-md-12 text-right">
                                          <button class="btn btn-sm btn-primary" (click)="onOpenModelDetails()"
                                              type="button">
                                              Model Detail </button>
                                      </div>
                                  </div>
                                  <div class="row align-items-center mt-1" *ngIf="isMobileView">
                                      <div class="col-6">
                                          <div class="float-left grand-link w-100" (click)="onOpenCalculationModel()">
                                              Grand Total ($)
                                          </div>
                                      </div>
                                      <div class="col-6">

                                          <div class="float-left w-100 text-right total-text">
                                              {{this.acc_grand_total
                                                  | toFixed:'3'}}
                                          </div>
                                      </div>
                                  </div>

                              </div>
                            </div>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="mandatory" headerClass="text-center" title="{{language.mandatory}}" [width]="100"
                          [minResizableWidth]="100">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <label class="custom-checkbox mb-0 wihtout-label mx-auto curser-pointer">
                              <input type="checkbox" id="mandatory_{{dataItem.rowindex}}" [disabled]="dataItem.isAccessory || dataItem.mandatory_item_disabled"
                                value={{dataItem.mandatory}} (change)="on_mandatory_change(mandatory,dataItem.rowindex)"
                                #mandatory [(checked)]="dataItem.mandatory" title="{{dataItem.mandatory}}">
                              <span class="checkbox"></span>
                            </label>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="unique_identifier" headerClass="text-center" title="{{language.unique_identifier}}"
                          [width]="135" [minResizableWidth]="135">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <label class="custom-checkbox mb-0 wihtout-label mx-auto curser-pointer">
                              <input type="checkbox" id="unique_identifer_{{dataItem.rowindex}}" [disabled]="dataItem.isAccessory || dataItem.type == '2' "
                                value={{dataItem.unique_identifer}} [(checked)]="dataItem.unique_identifer" (change)="on_unique_identifer_change(unique_identifer,dataItem.rowindex)"
                                title="{{dataItem.unique_identifer}}" #unique_identifer>
                              <span class="checkbox"></span>
                            </label>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="print_on_report" headerClass="text-center" title="{{language.print_on_report}}"
                          filter="numeric" [width]="120" [minResizableWidth]="120">
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <label class="custom-checkbox mb-0 wihtout-label mx-auto curser-pointer">
                              <input type="checkbox" id="print_on_report_{{dataItem.rowindex}}" value={{dataItem.print_on_report}}
                                (change)="print_on_report_change(print_on_report,dataItem.rowindex)" [(checked)]=dataItem.print_on_report
                                [disabled]="dataItem.print_on_report_disabled" #print_on_report title="{{dataItem.print_on_report}}">
                              <span class="checkbox"></span>
                            </label>
                          </ng-template>
                        </kendo-grid-column>
                        <kendo-grid-column field="delete" title="" template="" [width]="60" [minResizableWidth]="60">
                          <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                            <svg viewBox="0 0 753.23 753.23" class="icon">
                              <use xlink:href="#bin"></use>
                            </svg>
                          </ng-template>
                          <ng-template kendoGridCellTemplate let-dataItem>
                            <button type="button" class="btn btn-danger btn-sm btn-icon" (click)="onDeleteRow(dataItem.rowindex)">
                              <svg viewBox="0 0 753.23 753.23" class="icon">
                                <use xlink:href="#bin"></use>
                              </svg>
                            </button>
                          </ng-template>
                        </kendo-grid-column>
                      </kendo-grid>
                    </div>
                  </div>
      
                  <div class="col-md-3 d-none" id="right-tree-section">
                    <div class="opti_overflow-auto tree-wrapper">
      
                      <!--<div class="tree1 well">-->
                      <div class="tree well">
                        <div class="collaps-control d-flex justify-content-end">
                          <button class="btn btn-sm btn-icon btn-info mr-2 mt-2" title="{{this.language.expand_all}}" type="button"
                            (click)="expandAll()">
                            <svg class="icon" viewBox="0 0 1024 1024">
                              <use xlink:href="#expandAll"></use>
                            </svg>
                          </button>
                          <button class="btn btn-sm btn-icon btn-success mr-2 mt-2" title="{{this.language.collapse_all}}"
                            type="button" (click)="collapseAll()">
                            <svg class="icon" viewBox="0 0 1024 1024">
                              <use xlink:href="#collapseAll"></use>
                            </svg>
                          </button>
                          <button class="btn btn-sm btn-icon btn-danger mt-2 mr-2" (click)="toggleTree($event)" type="button"
                            title="Close">
                            <svg viewBox="0 0 475 475" class="icon">
                              <use xlink:href="#close"></use>
                            </svg>
                          </button>
                        </div>
                        <div class="custom-kendo-tree">
                          <kendo-treeview [nodes]="data1" textField="component" kendoTreeViewExpandable
                            kendoTreeViewSelectable kendoTreeViewHierarchyBinding childrenField="children" [expandBy]="'unique_key'"
                            [(expandedKeys)]="expandedKeys">
                            <ng-template kendoTreeViewNodeTemplate let-dataItem>
                              <span [attr.data-branchtype]="dataItem.branchType">{{dataItem.component}}</span>
                              <!-- <span class="k-icon k-i-file-pdf"></span>
                                  {{dataItem.component}} -->
                            </ng-template>
                          </kendo-treeview>
                        </div>
                        <!-- <div class="tree">
                            <ul class="parent_ul slim-scroll" *ngIf="tree_data_json.length > 0">
                                <li class="first_level_li" *ngFor="let element of tree_data_json; let i= index;" [hidden]="element.level != 0 && element.node_id!=''">
                                    <div *ngIf="element.level == 0 && element.node_id==''">
                                      <ng-template #template>
                                            <div class="modal-body text-center">
                                                <img [attr.src]="element.modalImage" style="max-width:100%">
                                            </div>
                                        </ng-template>
                                        <ng-template #popTemplate>
                                          <div class="text-center">
                                              <img *ngIf="!element.modalImage==''" [attr.src]="element.modalImage" height="100" (click)="openModal(template)">
                                              <div *ngIf="element.modalImage==''" class="no-img-msg">No Image Found</div>
                                          </div>
                                      </ng-template>
                                      <span class="first_level" kendoTooltip [tooltipTemplate]="template">
                                          <span #btn (click)="childExpand(btn)" class="expand-btn expanded" id="expand-btn" *ngIf="check_component_exist(element.unique_key, i).length > 0"></span>
                                          <span kendoTooltip [tooltipTemplate]="popTemplate" showOn="click" filter="span">
                                              <span [attr.data-branchtype]="element.branchType">{{element.component}}</span>
                                          </span>
                                      </span>
                                      <treeview id="treeview" #tree [tree_data_json]="check_component_exist(element.unique_key, i)" [complete_dataset]="tree_data_json" *ngIf="check_component_exist(element.unique_key, i).length > 0"></treeview>
                                    </div>
                                </li>
                            </ul>
                          </div> -->
                      </div>
                    </div>
                  </div>
      
      
                </div>
              </div>
              <div class="sticky-bottom-toolbar d-flex align-items-center justify-content-end border-top pt-2">
                <div class="mr-auto d-flex align-items-center flex-wrap">
                  <button type="button" (click)="onSave()" *ngIf="isSaveButtonVisible" class="btn btn-sm btn-success with-icon mr-2">
                    <svg viewBox="0 0 512 512" class="icon">
                      <use xlink:href="#saveDisk"></use>
                    </svg> {{language.save}}
                  </button>
                  <button type="button" *ngIf="isUpdateButtonVisible" (click)="onSave()" class="btn btn-sm btn-success with-icon mr-2">
                    <svg viewBox="0 0 512 512" class="icon">
                      <use xlink:href="#saveDisk"></use>
                    </svg> {{language.update}}
                  </button>
                  <button type="button" (click)="onExplodeClick('manual')" *ngIf="isExplodeButtonVisible" class="btn btn-sm btn-info with-icon mr-2">
                    <svg class="icon" viewBox="0 0 512 512">
                      <use xlink:href="#treeView"></use>
                    </svg> {{language.explode}}
                  </button>
                  <button type="button" (click)="onVerifyOutput()" *ngIf="isVerifyButtonVisible" class="btn btn-sm btn-primary with-icon mr-2">
                    <svg viewBox="0 0 490 490" class="icon">
                      <use xlink:href="#confirm"></use>
                    </svg> {{language.verify_output}}
                  </button>
                  <button type="button" [style.display]="isAttribute ? 'block' : 'none'" class="btn btn-sm btn-success with-icon"
                    (click)="onViewAttribute()">
                    {{language.view_attribute}}
                  </button>
                </div>
                <div class="ml-auto d-flex align-items-center flex-wrap">
                  <button type="button" class="btn btn-sm btn-danger mr-2 with-icon" *ngIf="isDeleteButtonVisible" (click)="onDelete()">
                    <svg viewBox="0 0 753.23 753.23" class="icon">
                      <use xlink:href="#bin"></use>
                    </svg>
                    <span> {{language.delete}}</span>
                  </button>
                  <button type="button" routerLink="{{view_route_link}}" class="btn btn-sm btn-secondary with-icon">
                    <svg viewBox="0 0 489 489" class="icon">
                      <use xlink:href="#cancel"></use>
                    </svg>
                    <span> {{language.cancel}}</span>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      
      <span [hidden]="showLookupLoader">
        <app-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' (lookupvalue)="getLookupValue($event) "
          [selectedImage]="selectedImage" (lookupvalues)="getLookupValues($event)"></app-lookup>
      </span>
      
      <!--Custom Dialog-->
      <app-custom-dialogs *ngIf="show_dialog" [dialogParams]="dialog_params" (userSelectionValue)="get_dialog_value($event)"></app-custom-dialogs>